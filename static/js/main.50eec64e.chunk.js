(this.webpackJsonpbettactoe=this.webpackJsonpbettactoe||[]).push([[0],{25:function(e,t,n){},26:function(e,t,n){},27:function(e,t,n){},28:function(e,t,n){},29:function(e,t,n){},30:function(e,t,n){},31:function(e,t,n){},37:function(e,t,n){},38:function(e,t,n){},39:function(e,t,n){},40:function(e,t,n){},41:function(e,t,n){},42:function(e,t,n){},43:function(e,t,n){},44:function(e,t,n){},45:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n(0),o=n.n(c),l=n(17),s=n.n(l),r=(n(25),n(13)),i=n(2),b=n(3),d=n(9),m=(n(26),function(e){return Object(a.jsx)("div",{className:"input-playername",children:Object(a.jsx)("input",{className:"pname-input-field",placeholder:"your name",type:"text",id:"fname",name:"fname",value:e.value,onChange:e.handleChange,spellCheck:"false"})})}),u=(n(27),function(e){return Object(a.jsx)("div",{className:"logo",children:Object(a.jsx)("div",{className:"background",style:{backgroundColor:e.backgroundColor},children:Object(a.jsxs)("div",{className:"foreground",style:{color:e.foregroundColor},children:[Object(a.jsx)("div",{className:"logo-square top left",children:"B"}),Object(a.jsx)("div",{className:"logo-square top c",children:"E"}),Object(a.jsx)("div",{className:"logo-square top right",children:"T"}),Object(a.jsx)("div",{className:"logo-square m left",children:"T"}),Object(a.jsx)("div",{className:"logo-square m c",children:"A"}),Object(a.jsx)("div",{className:"logo-square m right",children:"C"}),Object(a.jsx)("div",{className:"logo-square bottom left",children:"T"}),Object(a.jsx)("div",{className:"logo-square bottom c",children:"O"}),Object(a.jsx)("div",{className:"logo-square bottom right",children:"E"})]})})})}),j=(n(28),function(e){return Object(a.jsx)("div",{className:"custom-button",children:Object(a.jsxs)("button",{className:"btn",onClick:e.onClick,style:{backgroundColor:e.backgroundColor||"#e5e5e5"},children:[e.text," "]})})}),h=(n(29),function(e){return Object(a.jsxs)("div",{className:"menu-button",children:[Object(a.jsx)("div",{className:"input-component",style:{width:e.animate?e.shouldResetWidth?"0%":"70%":"0%"},children:Object(a.jsx)("input",{className:"rname-input-field",type:"text",id:e.text,placeholder:"Enter room name",value:e.roomName,onChange:e.handleOnChange,spellCheck:"false",required:!0})}),Object(a.jsx)("div",{className:"btn-component",style:{width:e.animate?e.shouldResetWidth?"100%":"30%":"100%"},children:Object(a.jsx)(j,{text:e.animate?e.shouldResetWidth?e.text:"GO":e.shouldResetWidth?e.text:"CONFIRM ?",onClick:e.shouldResetWidth?function(){}:e.onClick,backgroundColor:e.shouldResetWidth?"":"#ffd369"})})]})}),O=(n(30),function(e){var t=Object(c.useState)(0),n=Object(b.a)(t,2),o=n[0],l=n[1],s=function(t,n){console.log("DSB ~ file: index.tsx ~ line 16 ~ setGameMode ~ mode",n),e.handleModeChange(n),l(t)};return Object(a.jsx)("div",{className:"menu-button-container",children:Object(a.jsxs)("div",{style:{width:"262px"},children:[Object(a.jsx)("div",{onClick:function(){return s(1,"create")},children:Object(a.jsx)(h,{onClick:e.onSubmit,text:"CREATE ROOM",animate:!0,shouldResetWidth:1!==o,handleOnChange:e.handleOnChange,roomName:e.roomName})}),Object(a.jsx)("div",{onClick:function(){return s(2,"join")},children:Object(a.jsx)(h,{onClick:e.onSubmit,text:"JOIN ROOM",animate:!0,shouldResetWidth:2!==o,handleOnChange:e.handleOnChange,roomName:e.roomName})}),Object(a.jsx)("div",{onClick:function(){return s(3,"default")},children:Object(a.jsx)(h,{onClick:e.onSubmit,text:"RANDOM ROOM",shouldResetWidth:3!==o,handleOnChange:e.handleOnChange,roomName:e.roomName,confirm:!0})})]})})}),g=String(Math.floor(1e5*Math.random())),p=n(18);console.log("connecting to btt server ....");var x=new p.Socket("wss://still-plains-97814.herokuapp.com/socket",{params:{playerId:g}});x.connect();n(31);var f=function(){var e=Object(i.f)(),t=Object(c.useState)(""),n=Object(b.a)(t,2),o=n[0],l=n[1],s=Object(c.useState)(""),r=Object(b.a)(s,2),j=r[0],h=r[1],p=Object(c.useState)(2),f=Object(b.a)(p,2),v=f[0],N=f[1],C=Object(c.useState)(localStorage.getItem("btt-name")||String(g)),k=Object(b.a)(C,2),y=k[0],S=k[1],M=Object(c.useState)(!1),w=Object(b.a)(M,2),_=w[0],E=w[1],B=Object(d.b)({loading:!0,indicator:Object(a.jsx)(d.a,{width:"50"})}),R=(B.containerProps,B.indicatorEl);return Object(a.jsxs)("div",{className:"menu",children:[Object(a.jsx)(u,{backgroundColor:"#ffd369",foregroundColor:"#393e46"}),Object(a.jsx)(m,{value:y,handleChange:function(e){S(e.target.value),console.log("DSB ~ file: index.tsx ~ line 67 ~ Menu ~ e.target.value",e.target.value),localStorage.setItem("btt-name",e.target.value)}}),_?Object(a.jsxs)("div",{className:"searching",children:["SEARCHING...",Object(a.jsx)("div",{children:R})]}):Object(a.jsx)(O,{onSubmit:function(){var t={roomName:j,playerCount:v,gameMode:o||"default"};if("default"===t.gameMode||j){E(!0);var n=function(e){console.log("DSB ~ file: network.ts ~ line 27 ~ connectToMatchmakerChannel ~ gameData",e);var t="",n=e.playerCount,a="btt";switch(e.gameMode){case"default":e.roomName?(t="garuda_matchmaker:".concat(e.roomName,":").concat(a,":").concat(n),e.roomName):t="garuda_matchmaker:".concat(a,":").concat(n);break;case"create":t="garuda_matchmaker:".concat(e.roomName,":").concat(a,":createjoin"),e.roomName;break;case"join":t="garuda_matchmaker:".concat(e.roomName,":").concat(a,":createjoin"),e.roomName,n=-1}var c={roomName:t,playerCount:n,matchId:e.roomName,gameMode:e.gameMode};return x.channel(t,{player_count:c.playerCount,room_name:c.roomName,match_id:c.matchId,mode:c.gameMode})}(t);n.join().receive("ok",(function(e){return console.log("Joined matchmaker",e),"ok"})),n.on("match_maker_event",(function(t){var a;console.log("On match maker event",t),n.leave(),a=t,e.push({pathname:"/game",state:{gameChannelData:a,playerName:y}})}))}},handleModeChange:function(e){h(""),N(2),l(e||"default")},roomName:j,handleOnChange:function(e){e.preventDefault(),h(e.target.value)}})]})},v=function(){return Object(a.jsx)("div",{children:"Lobby"})},N={},C=(n(37),function(e){var t=e.value;return Object(a.jsxs)("button",{className:"square",onClick:function(){var t;e.canMove&&(null===(t=N.gameChannel)||void 0===t||t.push("move",{movedata:{pos:e.pos}}))},children:["0"===t&&"",t===g&&"X",t!==g&&"0"!==t&&"O"]})}),k=(n(38),function(e){for(var t=e.canMove,n=e.board,c=[],o=1;o<=9;o++)c.push(o);return Object(a.jsx)("div",{className:"board",children:c.map((function(e){return Object(a.jsx)(C,{value:n[e-1],pos:e,canMove:t},e)}))})}),y=o.a.createContext({playerName:"",opponentName:""}),S=(n(39),function(e){var t=function(t){e.canBet&&e.onClick(t)};return Object(a.jsxs)("div",{className:"bet-controller",style:{opacity:e.canBet?1:0},children:[Object(a.jsx)("div",{className:"up",onClick:function(){return t(1)},children:"U"}),Object(a.jsx)("div",{className:"down",onClick:function(){return t(-1)},children:"D"})]})}),M=(n(40),function(e){var t=Object(d.b)({loading:!0,indicator:Object(a.jsx)(d.a,{width:"30"})}),n=(t.containerProps,t.indicatorEl);return Object(a.jsxs)("div",{className:"player-hud",children:[Object(a.jsx)("div",{className:"player-name",children:e.name}),e.lid?Object(a.jsxs)("div",{className:"wallet-container hud-spinner",style:{backgroundColor:"#fcbf49"},children:["WAITING",Object(a.jsx)("div",{children:n})]}):Object(a.jsx)("div",{className:"wallet-container",style:{backgroundColor:e.betWon?"white":"transparent"},children:Object(a.jsxs)("div",{className:"wallet",children:[Object(a.jsxs)("div",{className:"balance",children:[Object(a.jsx)("div",{className:"balance-text",children:"BALANCE"}),Object(a.jsx)("div",{className:"balance-amount",children:e.balance})]}),Object(a.jsxs)("div",{className:"bet",children:[Object(a.jsx)("div",{className:"bet-text",children:"BET"}),Object(a.jsx)("div",{className:"bet-amount",children:e.bet})]})]})})]})}),w=(n(41),function(e){var t=e.canBet,n=e.betWon,o=(e.setBetAmount,e.isOpponentVisible),l=e.opponentData,s=e.playerData,r=e.betController,i=Object(c.useContext)(y);return Object(a.jsxs)("div",{className:"hud",children:[Object(a.jsx)(M,{balance:s.balance,bet:s.bet,name:i.playerName,betWon:!t&&n}),Object(a.jsx)(S,{canBet:t,onClick:function(e){return r(e)}}),Object(a.jsx)(M,{balance:l.balance,bet:l.bet,lid:!o,name:i.opponentName,betWon:!n})]})}),_=(n(42),function(e){var t="";return e.winner===g?("won",t="CONGRATULATIONS! YOU WON"):("lost",t="BETTER LUCK NEXT TIME!"),Object(a.jsx)("div",{className:"result-comp",children:t})}),E=(n(43),function(){var e=Object(i.f)(),t=Object(i.g)();console.log("DSB ~ file: index.tsx ~ line 32 ~ Game ~ location",t),t.state||e.push({pathname:"/"});var n=Object(c.useState)("OPPONENT"),o=Object(b.a)(n,2),l=o[0],s=o[1],r=Object(c.useState)(!1),d=Object(b.a)(r,2),m=d[0],u=d[1],h=Object(c.useState)(!0),O=Object(b.a)(h,2),p=O[0],f=O[1],v=Object(c.useState)(!1),C=Object(b.a)(v,2),S=C[0],M=C[1],E=Object(c.useState)(!1),B=Object(b.a)(E,2),R=B[0],T=B[1],D=Object(c.useState)(0),I=Object(b.a)(D,2),W=I[0],A=I[1],q=Object(c.useState)({bet:0,balance:100}),G=Object(b.a)(q,2),P=G[0],F=G[1],L=Object(c.useState)({bet:0,balance:100}),U=Object(b.a)(L,2),J=U[0],V=U[1],Y=Object(c.useState)(["0","0","0","0","0","0","0","0","0"]),H=Object(b.a)(Y,2),X=H[0],K=H[1],z=Object(c.useState)(!1),Q=Object(b.a)(z,2),Z=Q[0],$=Q[1],ee=Object(c.useState)(""),te=Object(b.a)(ee,2),ne=te[0],ae=te[1];Object(c.useEffect)((function(){t.state&&(N.gameChannel=function(e,t){console.log("DSB ~ file: network.ts ~ line 71 ~ connectToGameChannel ~ matchmakerChannelMessage",e);var n=e.match_id;return x.channel("".concat("btt",":").concat(n),{name:t})}(t.state.gameChannelData,t.state.playerName),N.gameChannel.join().receive("ok",(function(e){console.log("Joined game channel",e)})),N.gameChannel.on("start_game_event",(function(e){console.log("On start_game_event",e),e.gamestate.player_1.id===g?s(e.gamestate.player_2.name):s(e.gamestate.player_1.name),u(!0)})),N.gameChannel.on("bet_res",(function(e){if(console.log("bet_res",e),e.p1.id===g?(F({bet:e.p2.bet,balance:e.p2.balance}),V({bet:e.p1.bet,balance:e.p1.balance})):(F({bet:e.p1.bet,balance:e.p1.balance}),V({bet:e.p2.bet,balance:e.p2.balance})),console.log("DSB ~ file: index.tsx ~ line 60 ~ network.gameChannel.on ~ message.turn",e.turn),console.log("DSB ~ file: index.tsx ~ line 61 ~ network.gameChannel.on ~ PLAYER_ID",g),"continue"===e.turn.id){var t=e.board.map((function(e){return String(e)}));K(t),f(!0),M(!1),T(!1)}else e.turn.id===g?(M(!0),console.log("YOU CAN MOVE")):(M(!1),console.log("YOU CAN NOT MOVE")),T(!0),f(!1)})),N.gameChannel.on("move_res",(function(e){console.log("move_res",e);var t=e.board.map((function(e){return String(e)}));e.p1.id===g?(F({bet:e.p2.bet,balance:e.p2.balance}),V({bet:0,balance:e.p1.balance})):(F({bet:e.p1.bet,balance:e.p1.balance}),V({bet:0,balance:e.p2.balance})),K(t),f(!0),M(!1),T(!1)})),N.gameChannel.on("game_res",(function(e){console.log("game_res",e),ae(e.winner);var t=e.board.map((function(e){return String(e)}));K(t),f(!1),M(!1),$(!0)})))}),[]);return Object(a.jsxs)("div",{className:"game",children:[!m&&Object(a.jsx)("div",{className:"waiting",children:"WAITING..."}),m&&Object(a.jsxs)("div",{className:"start-game",children:[Object(a.jsx)(y.Provider,{value:{playerName:t.state.playerName,opponentName:l},children:Object(a.jsx)(w,{canBet:p,betWon:S,setBetAmount:A,isOpponentVisible:R,opponentData:P,playerData:J,betController:function(e){return function(e){var t=Math.max(0,Math.min(J.balance,J.balance-e)),n=Math.max(0,Math.min(J.balance,J.bet+e));V({bet:n,balance:t}),A(n)}(e)}})}),Object(a.jsx)("div",{className:"bet-confirm",style:{opacity:p?1:0},children:Object(a.jsx)("div",{style:{width:"30%"},children:Object(a.jsx)(j,{onClick:function(){var e;p&&(console.log(W),f(!1),M(!1),null===(e=N.gameChannel)||void 0===e||e.push("bet",{betdata:{playerId:g,bet:W}}))},text:"CONFIRM",backgroundColor:"#ffd369"})})}),Object(a.jsx)(k,{canMove:S,board:X}),Z&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(_,{winner:ne}),Object(a.jsx)("button",{className:"btn-go-home",onClick:function(){e.push({pathname:"/"})},children:"NEW MATCH"})]})]})]})}),B=function(e){return Object(a.jsx)(r.a,{children:Object(a.jsxs)(i.c,{children:[Object(a.jsx)(i.a,{exact:!0,path:"/",component:f}),Object(a.jsx)(i.a,{exact:!0,path:"/lobby",component:v}),Object(a.jsx)(i.a,{exact:!0,path:"/game",component:E})]})})},R=(n(44),function(){return Object(a.jsx)("div",{className:"App",children:Object(a.jsx)(B,{})})}),T=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,46)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,o=t.getLCP,l=t.getTTFB;n(e),a(e),c(e),o(e),l(e)}))};s.a.render(Object(a.jsx)(R,{}),document.getElementById("root")),T()}},[[45,1,2]]]);
//# sourceMappingURL=main.50eec64e.chunk.js.map