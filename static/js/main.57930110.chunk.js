(this.webpackJsonpbettactoe=this.webpackJsonpbettactoe||[]).push([[0],[,,,,,,,,function(e){e.exports=JSON.parse('{"en":{"place_bet":"place your bet","waiting_for_op_bet":"WAITING FOR OPPONENT\'S BET","waiting_for_op_move":"WAITING FOR OPPONENT\'S MOVE","move":"MAKE YOU MOVE NOW","you_won":"CONGRATULATIONS! AGAIN?","you_lost":"TRY AGAIN?","bet":"BET","go":"GO","equal_bet":"equal bets!","how_to_play":"How to play"}}')},,,,,,,,,,,,,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(1),c=n(0),o=n(18),s=n.n(o),l=(n(26),n(13)),i=n(2),r=n(3),d=n(16),b=(n(27),function(e){return Object(a.jsxs)("div",{className:"input-playername",children:[Object(a.jsx)("label",{className:"name-label",htmlFor:"fname",children:"name"}),Object(a.jsx)("input",{className:"pname-input-field",placeholder:"your name",type:"text",id:"fname",name:"fname",value:e.value,onChange:e.handleChange,spellCheck:"false"})]})}),j=(n(28),function(e){return Object(a.jsx)("div",{className:"logo",children:Object(a.jsx)("div",{className:"background",style:{backgroundColor:e.backgroundColor},children:Object(a.jsxs)("div",{className:"foreground",style:{color:e.foregroundColor},children:[Object(a.jsx)("div",{className:"logo-square top left",children:"B"}),Object(a.jsx)("div",{className:"logo-square top c",children:"E"}),Object(a.jsx)("div",{className:"logo-square top right",children:"T"}),Object(a.jsx)("div",{className:"logo-square m left",children:"T"}),Object(a.jsx)("div",{className:"logo-square m c",children:"A"}),Object(a.jsx)("div",{className:"logo-square m right",children:"C"}),Object(a.jsx)("div",{className:"logo-square bottom left",children:"T"}),Object(a.jsx)("div",{className:"logo-square bottom c",children:"O"}),Object(a.jsx)("div",{className:"logo-square bottom right",children:"E"})]})})})}),O=(n(29),function(e){return Object(a.jsx)("div",{className:"custom-button",children:Object(a.jsxs)("button",{className:"btn",onClick:e.onClick,style:{backgroundColor:e.backgroundColor||"#e5e5e5"},children:[e.text," "]})})}),u=(n(30),function(e){return Object(a.jsxs)("div",{className:"menu-button",children:[Object(a.jsx)("div",{className:"input-component",style:{width:e.animate?e.shouldResetWidth?"0%":"70%":"0%"},children:Object(a.jsx)("input",{className:"rname-input-field",type:"text",id:e.text,placeholder:"Enter room name",value:e.roomName,onChange:e.handleOnChange,spellCheck:"false",required:!0})}),Object(a.jsx)("div",{className:"btn-component",style:{width:e.animate?e.shouldResetWidth?"100%":"30%":"100%"},children:Object(a.jsx)(O,{text:e.animate?e.shouldResetWidth?e.text:"GO":e.shouldResetWidth?e.text:"CONFIRM ?",onClick:e.shouldResetWidth?function(){}:e.onClick,backgroundColor:e.shouldResetWidth?"":"#ffd369"})})]})}),m=(n(31),function(e){var t=Object(c.useState)(0),n=Object(r.a)(t,2),o=n[0],s=n[1],l=function(t,n){console.log("DSB ~ file: index.tsx ~ line 16 ~ setGameMode ~ mode",n),e.handleModeChange(n),s(t)};return Object(a.jsx)("div",{className:"menu-button-container",children:Object(a.jsxs)("div",{style:{width:"262px"},children:[Object(a.jsx)("div",{onClick:function(){return l(1,"create")},children:Object(a.jsx)(u,{onClick:e.onSubmit,text:"CREATE ROOM",animate:!0,shouldResetWidth:1!==o,handleOnChange:e.handleOnChange,roomName:e.roomName})}),Object(a.jsx)("div",{onClick:function(){return l(2,"join")},children:Object(a.jsx)(u,{onClick:e.onSubmit,text:"JOIN ROOM",animate:!0,shouldResetWidth:2!==o,handleOnChange:e.handleOnChange,roomName:e.roomName})}),Object(a.jsx)("div",{onClick:function(){return l(3,"default")},children:Object(a.jsx)(u,{onClick:e.onSubmit,text:"RANDOM ROOM",shouldResetWidth:3!==o,handleOnChange:e.handleOnChange,roomName:e.roomName,confirm:!0})})]})})}),h=String(Math.floor(1e5*Math.random())),N=n(19);console.log("connecting to btt server ....");var p=new N.Socket("wss://still-plains-97814.herokuapp.com/socket",{params:{playerId:h}});p.connect();n(32);var g,x,f,v=function(){var e=Object(i.f)(),t=Object(c.useState)(""),n=Object(r.a)(t,2),o=n[0],s=n[1],l=Object(c.useState)(""),u=Object(r.a)(l,2),N=u[0],g=u[1],x=Object(c.useState)(!1),f=Object(r.a)(x,2),v=f[0],E=f[1],T=Object(c.useState)(2),_=Object(r.a)(T,2),C=_[0],y=_[1],k=Object(c.useState)(localStorage.getItem("btt-name")||String(h)),I=Object(r.a)(k,2),S=I[0],M=I[1],A=Object(c.useState)(),G=Object(r.a)(A,2),w=G[0],B=G[1],R=Object(c.useState)(),P=Object(r.a)(R,2),V=(P[0],P[1]),W=Object(c.useState)(0),L=Object(r.a)(W,2),U=(L[0],L[1],{}),F=Object(c.useState)([]),q=Object(r.a)(F,2),Y=q[0],D=q[1];Object(c.useEffect)((function(){var e=p.channel("lobby:btt",{playerId:h});e.join().receive("ok",(function(e){return console.log("Joined Lobby",e),"ok"})),e.on("presence_game_state",(function(e){for(var t=Object.keys(e),n=0;n<t.length;n++)U[t[n]]=1,D(Object.keys(U))})),e.on("presence_diff",(function(e){for(var t=Object.keys(e.joins),n=Object.keys(e.leaves),a=0;a<t.length;a++)U[t[a]]||(U[t[a]]=1);for(var c=0;c<n.length;c++)if(U[n[c]]){var o=n[c];delete U[o]}D(Object.keys(U)),console.log("DSB ~ file: index.tsx ~ line 62 ~ lobby.on ~ Object.keys(players)",Object.keys(U))})),e.on("presence_state",(function(e){console.log("STATE",e)})),V(e)}),[]);var J=Object(d.b)({loading:!0,indicator:Object(a.jsx)(d.a,{width:"20"})});J.containerProps,J.indicatorEl;return Object(a.jsxs)("div",{className:"menu",children:[Object(a.jsx)("button",{className:"arrow-button",onClick:function(){e.push({pathname:"/htp"})},children:">"}),Object(a.jsx)(j,{backgroundColor:"#ffd369",foregroundColor:"#393e46"}),Object(a.jsx)(b,{value:S,handleChange:function(e){M(e.target.value),localStorage.setItem("btt-name",e.target.value)}}),v?Object(a.jsxs)("div",{className:"searching",children:[Object(a.jsxs)("div",{className:"searching-text",children:["SEARCHING",Object(a.jsx)("div",{className:"loading"})]}),Object(a.jsx)("div",{className:"btn-component",style:{width:"100%"},children:Object(a.jsx)(O,{text:"CANCEL MATCHMAKING",onClick:function(){null===w||void 0===w||w.leave(),E(!1)},backgroundColor:"#fefefe"})})]}):Object(a.jsxs)("div",{children:[Object(a.jsxs)("div",{className:"online-count",children:[Object(a.jsx)("span",{className:"logged-in",children:"\u25cf"}),Object(a.jsxs)("div",{className:"online-txt",children:["online ",Y.length]})]}),Object(a.jsx)(m,{onSubmit:function(){var t={roomName:N,playerCount:C,gameMode:o||"default"};if("default"===t.gameMode||N){E(!0);var n=function(e){console.log("DSB ~ file: network.ts ~ line 27 ~ connectToMatchmakerChannel ~ gameData",e);var t="",n=e.playerCount,a="btt";switch(e.gameMode){case"default":e.roomName?(t="garuda_matchmaker:".concat(e.roomName,":").concat(a,":").concat(n),e.roomName):t="garuda_matchmaker:".concat(a,":").concat(n);break;case"create":t="garuda_matchmaker:".concat(e.roomName,":").concat(a,":createjoin"),e.roomName;break;case"join":t="garuda_matchmaker:".concat(e.roomName,":").concat(a,":createjoin"),e.roomName,n=-1}var c={roomName:t,playerCount:n,matchId:e.roomName,gameMode:e.gameMode};return p.channel(t,{player_count:c.playerCount,room_name:c.roomName,match_id:c.matchId,mode:c.gameMode})}(t);n.join().receive("ok",(function(e){return console.log("Joined matchmaker",e),"ok"})),n.on("match_maker_event",(function(t){var a;console.log("On match maker event",t),n.leave(),a=t,e.push({pathname:"/game",state:{gameChannelData:a,playerName:S}})})),B(n)}},handleModeChange:function(e){g(""),y(2),s(e||"default")},roomName:N,handleOnChange:function(e){e.preventDefault(),g(e.target.value)}})]})]})},E=function(){return Object(a.jsx)("div",{children:"Lobby"})},T={},_=(n(38),function(e){var t=e.sign,n=e.index,c=e.canMove,o=e.backgroundColor;return Object(a.jsx)("div",{className:"square",onClick:function(){var e;c&&(null===(e=T.gameChannel)||void 0===e||e.push("move",{movedata:{pos:n}}))},style:{backgroundColor:o},children:Object(a.jsx)("div",{className:"sign",children:"0"!==t?t:""})})}),C=(n(39),function(e){for(var t=e.board,n=e.winPattern,c=e.canMove,o=[],s=1;s<=9;s++)o.push(s);return Object(a.jsx)("div",{className:"board",children:o.map((function(e){return Object(a.jsx)(_,{canMove:c,backgroundColor:(o=n,s=e-1,-1!==o.indexOf(s)?"#ffeaa7":"#E5E5E5"),sign:String(t[e-1]),index:e},Math.random());var o,s}))})});!function(e){e[e.PLACE_BET=0]="PLACE_BET",e[e.WAITING_FOR_OPPONENT_BET=1]="WAITING_FOR_OPPONENT_BET",e[e.OPPONENT_MOVE=2]="OPPONENT_MOVE",e[e.YOUR_MOVE=3]="YOUR_MOVE",e[e.YOU_WON=4]="YOU_WON",e[e.YOU_LOST=5]="YOU_LOST",e[e.EQUAL_BETS=6]="EQUAL_BETS",e[e.NONE=7]="NONE"}(g||(g={})),function(e){e[e.BETTING=0]="BETTING",e[e.NOTICE=1]="NOTICE",e[e.GAMEOVER=2]="GAMEOVER"}(x||(x={})),function(e){e[e.BETTING=0]="BETTING",e[e.BET_WAITING=1]="BET_WAITING",e[e.MOVE_WAITING=2]="MOVE_WAITING",e[e.MOVING=3]="MOVING",e[e.GAMEOVER=4]="GAMEOVER"}(f||(f={}));n(40);var y=function(e){var t=e.name,n=e.balance,c=e.bet,o=e.gameState,s=e.style,l=o===f.BETTING||o===f.GAMEOVER?{display:"block"}:{display:"none"};return Object(a.jsxs)("div",{className:"hud",style:s,children:[Object(a.jsx)("div",{className:"name",children:t.toLocaleUpperCase()}),Object(a.jsxs)("div",{className:"balance",style:l,children:["BALANCE: ",String(n).padStart(3,"0")]}),Object(a.jsx)("div",{className:"bet",children:String(c).padStart(2,"0")})]})},k=(n(41),n(8)),I=function(e){var t=e.boardType,n=e.message,o=e.canClick,s=e.handlePlaceBetValueInput,l=e.placeBet,i=Object(c.useRef)(null),r={width:"212px",display:"block"},d={width:"0px",display:"none"},b={width:"50px",display:"block"},j=o?{backgroundColor:"rgb(255, 211, 105)"}:{backgroundColor:"#8395a7"},O=t===x.GAMEOVER?"GO":"BET";t===x.BETTING?(r={width:"212px",display:"block"},d={width:"0px",display:"none"},b={width:"50px",display:"block"}):t===x.NOTICE?(r={width:"0px",display:"none"},d={width:"262px",display:"flex"},b={width:"0px",display:"none"}):t===x.GAMEOVER&&(r={width:"0px",display:"none"},d={width:"212px",display:"flex"},b={width:"50px",display:"block"});var u="";n===g.WAITING_FOR_OPPONENT_BET?u=k.en.waiting_for_op_bet:n===g.YOUR_MOVE?u=k.en.move:n===g.OPPONENT_MOVE?u=k.en.waiting_for_op_move:n===g.YOU_WON?u=k.en.you_won:n===g.EQUAL_BETS?u=k.en.equal_bet:n===g.PLACE_BET?u=k.en.place_bet:n===g.YOU_LOST&&(u=k.en.you_lost);return Object(a.jsxs)("div",{className:"status-board",children:[Object(a.jsx)("div",{className:"bet-input",style:r,children:Object(a.jsx)("input",{className:"bet-input",ref:i,style:{width:"100%"},placeholder:u,type:"number",id:"betval",name:"betval",min:0,onChange:s,spellCheck:"false"})}),Object(a.jsx)("div",{className:"notice-board",style:d,children:Object(a.jsx)("div",{children:u})}),Object(a.jsx)("div",{className:"bet-btn",style:b,children:Object(a.jsx)("button",{className:"bet-btn",onClick:o?function(){i.current&&(console.log("ICI",i.current.value),i.current.value=void 0),l()}:function(){},style:{backgroundColor:j.backgroundColor,width:"100%"},children:O})})]})},S=(n(42),function(){var e=Object(i.f)(),t=Object(i.g)(),n=Object(c.useState)(0),o=Object(r.a)(n,2),s=o[0],l=o[1],d=Object(c.useState)(x.BETTING),b=Object(r.a)(d,2),j=b[0],O=b[1],u=Object(c.useState)(g.PLACE_BET),m=Object(r.a)(u,2),N=m[0],v=m[1],E=Object(c.useState)(f.BETTING),_=Object(r.a)(E,2),k=_[0],S=_[1],M=Object(c.useState)(100),A=Object(r.a)(M,2),G=A[0],w=A[1],B=Object(c.useState)(!0),R=Object(r.a)(B,2),P=R[0],V=R[1],W=Object(c.useState)([0,0,0,0,0,0,0,0,0]),L=Object(r.a)(W,2),U=L[0],F=L[1],q=Object(c.useState)(0),Y=Object(r.a)(q,2),D=Y[0],J=Y[1],Q=Object(c.useState)(100),H=Object(r.a)(Q,2),K=H[0],X=H[1],z=Object(c.useState)(""),Z=Object(r.a)(z,2),$=Z[0],ee=Z[1],te=Object(c.useState)([]),ne=Object(r.a)(te,2),ae=ne[0],ce=ne[1];if(Object(c.useEffect)((function(){t.state&&(T.gameChannel=function(e,t){var n=e.match_id;return p.channel("".concat("btt",":").concat(n),{name:t})}(t.state.gameChannelData,t.state.playerName),T.gameChannel.join().receive("ok",(function(e){console.log("Joined game channel",e)})),T.gameChannel.on("start_game_event",(function(e){console.log("On start_game_event",e),e.gamestate.player_1.id===h?ee(e.gamestate.player_2.name):ee(e.gamestate.player_1.name),F(e.gamestate.board)})),T.gameChannel.on("bet_res",(function(e){console.log("bet_res",e),e.p1.id===h?(X(e.p2.balance),J(e.p2.bet)):(X(e.p1.balance),J(e.p1.bet)),"continue"===e.turn.id?(l(0),S(f.BETTING),v(g.EQUAL_BETS),O(x.BETTING)):e.turn.id===h?(S(f.MOVING),v(g.YOUR_MOVE)):(S(f.MOVE_WAITING),v(g.OPPONENT_MOVE))})),T.gameChannel.on("move_res",(function(e){var t=e.board.map((function(e){return e===h?"X":0!==e?"O":0}));F(t),l(0),S(f.BETTING),O(x.BETTING),v(g.PLACE_BET),e.p1.id})),T.gameChannel.on("game_res",(function(e){ce(e.pattern);var t=e.board.map((function(e){return e===h?"X":0!==e?"O":0}));F(t),O(x.GAMEOVER),S(f.GAMEOVER),e.winner===h?v(g.YOU_WON):v(g.YOU_LOST)})))}),[]),!t.state)return e.push({pathname:"/"}),Object(a.jsx)(a.Fragment,{});return Object(a.jsxs)("div",{className:"game",children:[Object(a.jsxs)("div",{className:"hud-container",children:[Object(a.jsx)(y,{name:t.state.playerName,bet:s,balance:k===f.GAMEOVER?G:G-s,gameState:k,style:{backgroundColor:"#FFD369"}}),Object(a.jsx)(y,{name:$,bet:k===f.BET_WAITING||k===f.BETTING?"...":D,balance:K,gameState:k,style:{backgroundColor:"#FFD369"}})]}),Object(a.jsx)(I,{boardType:j,canClick:P,message:N,handlePlaceBetValueInput:function(e){e.preventDefault();var t=Number(e.target.value);console.log(t),t>G||t<0?V(!1):(V(!0),l(Number(t)))},placeBet:k===f.GAMEOVER?function(){e.push({pathname:"/"})}:function(){var e;k===f.BETTING&&(null===(e=T.gameChannel)||void 0===e||e.push("bet",{betdata:{playerId:h,bet:s}}),w(G-s),S(f.BET_WAITING),O(x.NOTICE),v(g.WAITING_FOR_OPPONENT_BET))}}),Object(a.jsx)(C,{board:U,winPattern:ae,canMove:k===f.MOVING})]})}),M=(n(43),function(){var e=Object(i.f)();return Object(a.jsxs)("div",{className:"how-to-play",children:[Object(a.jsx)("button",{className:"arrow-button arrow-inverted",onClick:function(){e.push({pathname:"/"})},children:"<"}),Object(a.jsx)("div",{className:"title",children:k.en.how_to_play}),Object(a.jsxs)("div",{className:"how-to-play-contents",children:[Object(a.jsx)("div",{className:"question",children:"Matchmaking : "}),Object(a.jsx)("div",{className:"answer",children:Object(a.jsxs)("ul",{children:[Object(a.jsxs)("li",{children:[Object(a.jsx)("span",{children:"create a room"}),Object(a.jsx)("br",{}),"Enter any room name and share with your friend to join."]}),Object(a.jsxs)("li",{children:[Object(a.jsx)("span",{children:"join a room"}),Object(a.jsx)("br",{}),"Join a room that is already created by your friend."]}),Object(a.jsxs)("li",{children:[Object(a.jsx)("span",{children:"search for a random opponent"}),Object(a.jsx)("br",{}),"Randomly match with someone."]})]})})]}),Object(a.jsxs)("div",{className:"how-to-play-contents",children:[Object(a.jsx)("div",{className:"question",children:"Gameplay : "}),Object(a.jsx)("div",{className:"answer",children:Object(a.jsxs)("ul",{children:[Object(a.jsx)("li",{children:"Both players place a bet for the turn."}),Object(a.jsx)("li",{children:"After placing bets, the one with the highest bet gets to move."}),Object(a.jsx)("li",{children:"In case of draw, one with less total balance gets the chance."}),Object(a.jsx)("li",{children:"If draw persists, betting is done again."})]})})]})]})}),A=function(e){return Object(a.jsx)(l.a,{children:Object(a.jsxs)(i.c,{children:[Object(a.jsx)(i.a,{exact:!0,path:"/",component:v}),Object(a.jsx)(i.a,{exact:!0,path:"/lobby",component:E}),Object(a.jsx)(i.a,{exact:!0,path:"/game",component:S}),Object(a.jsx)(i.a,{exact:!0,path:"/htp",component:M})]})})},G=(n(44),function(){return Object(a.jsx)("div",{className:"App",children:Object(a.jsx)(A,{})})}),w=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,46)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,o=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),o(e),s(e)}))};s.a.render(Object(a.jsx)(G,{}),document.getElementById("root")),w()}],[[45,1,2]]]);
//# sourceMappingURL=main.57930110.chunk.js.map