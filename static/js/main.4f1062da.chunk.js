(this.webpackJsonpbettactoe=this.webpackJsonpbettactoe||[]).push([[0],[,,,,,,,,,function(e){e.exports=JSON.parse('{"en":{"place_bet":"PLACE YOU BET","waiting_for_op_bet":"WAITING FOR OPPONENT\'S BET","waiting_for_op_move":"WAITING FOR OPPONENT\'S MOVE","move":"MAKE YOU MOVE NOW","you_won":"CONGRATULATIONS! AGAIN?","you_lost":"TRY AGAIN?","bet":"BET","go":"GO"}}')},,,,,,,,,,,,,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(1),o=a(0),c=a(18),l=a.n(c),s=(a(26),a(13)),r=a(2),i=a(3),d=a(16),u=(a(27),function(e){return Object(n.jsx)("div",{className:"input-playername",children:Object(n.jsx)("input",{className:"pname-input-field",placeholder:"your name",type:"text",id:"fname",name:"fname",value:e.value,onChange:e.handleChange,spellCheck:"false"})})}),O=(a(28),function(e){return Object(n.jsx)("div",{className:"logo",children:Object(n.jsx)("div",{className:"background",style:{backgroundColor:e.backgroundColor},children:Object(n.jsxs)("div",{className:"foreground",style:{color:e.foregroundColor},children:[Object(n.jsx)("div",{className:"logo-square top left",children:"B"}),Object(n.jsx)("div",{className:"logo-square top c",children:"E"}),Object(n.jsx)("div",{className:"logo-square top right",children:"T"}),Object(n.jsx)("div",{className:"logo-square m left",children:"T"}),Object(n.jsx)("div",{className:"logo-square m c",children:"A"}),Object(n.jsx)("div",{className:"logo-square m right",children:"C"}),Object(n.jsx)("div",{className:"logo-square bottom left",children:"T"}),Object(n.jsx)("div",{className:"logo-square bottom c",children:"O"}),Object(n.jsx)("div",{className:"logo-square bottom right",children:"E"})]})})})}),m=(a(29),function(e){return Object(n.jsx)("div",{className:"custom-button",children:Object(n.jsxs)("button",{className:"btn",onClick:e.onClick,style:{backgroundColor:e.backgroundColor||"#e5e5e5"},children:[e.text," "]})})}),b=(a(30),function(e){return Object(n.jsxs)("div",{className:"menu-button",children:[Object(n.jsx)("div",{className:"input-component",style:{width:e.animate?e.shouldResetWidth?"0%":"70%":"0%"},children:Object(n.jsx)("input",{className:"rname-input-field",type:"text",id:e.text,placeholder:"Enter room name",value:e.roomName,onChange:e.handleOnChange,spellCheck:"false",required:!0})}),Object(n.jsx)("div",{className:"btn-component",style:{width:e.animate?e.shouldResetWidth?"100%":"30%":"100%"},children:Object(n.jsx)(m,{text:e.animate?e.shouldResetWidth?e.text:"GO":e.shouldResetWidth?e.text:"CONFIRM ?",onClick:e.shouldResetWidth?function(){}:e.onClick,backgroundColor:e.shouldResetWidth?"":"#ffd369"})})]})}),j=(a(31),function(e){var t=Object(o.useState)(0),a=Object(i.a)(t,2),c=a[0],l=a[1],s=function(t,a){console.log("DSB ~ file: index.tsx ~ line 16 ~ setGameMode ~ mode",a),e.handleModeChange(a),l(t)};return Object(n.jsx)("div",{className:"menu-button-container",children:Object(n.jsxs)("div",{style:{width:"262px"},children:[Object(n.jsx)("div",{onClick:function(){return s(1,"create")},children:Object(n.jsx)(b,{onClick:e.onSubmit,text:"CREATE ROOM",animate:!0,shouldResetWidth:1!==c,handleOnChange:e.handleOnChange,roomName:e.roomName})}),Object(n.jsx)("div",{onClick:function(){return s(2,"join")},children:Object(n.jsx)(b,{onClick:e.onSubmit,text:"JOIN ROOM",animate:!0,shouldResetWidth:2!==c,handleOnChange:e.handleOnChange,roomName:e.roomName})}),Object(n.jsx)("div",{onClick:function(){return s(3,"default")},children:Object(n.jsx)(b,{onClick:e.onSubmit,text:"RANDOM ROOM",shouldResetWidth:3!==c,handleOnChange:e.handleOnChange,roomName:e.roomName,confirm:!0})})]})})}),h=String(Math.floor(1e5*Math.random())),N=a(19);console.log("connecting to btt server ....");var g=new N.Socket("ws://localhost:4000/socket",{params:{playerId:h}});g.connect();a(32);var p,f,x,v=function(){var e=Object(r.f)(),t=Object(o.useState)(""),a=Object(i.a)(t,2),c=a[0],l=a[1],s=Object(o.useState)(""),m=Object(i.a)(s,2),b=m[0],N=m[1],p=Object(o.useState)(!1),f=Object(i.a)(p,2),x=f[0],v=f[1],E=Object(o.useState)(2),T=Object(i.a)(E,2),C=T[0],_=T[1],I=Object(o.useState)(localStorage.getItem("btt-name")||String(h)),k=Object(i.a)(I,2),y=k[0],M=k[1],G=Object(d.b)({loading:!0,indicator:Object(n.jsx)(d.a,{width:"50"})}),S=(G.containerProps,G.indicatorEl);return Object(n.jsxs)("div",{className:"menu",children:[Object(n.jsx)(O,{backgroundColor:"#ffd369",foregroundColor:"#393e46"}),Object(n.jsx)(u,{value:y,handleChange:function(e){M(e.target.value),localStorage.setItem("btt-name",e.target.value)}}),x?Object(n.jsxs)("div",{className:"searching",children:["SEARCHING...",Object(n.jsx)("div",{children:S})]}):Object(n.jsx)(j,{onSubmit:function(){var t={roomName:b,playerCount:C,gameMode:c||"default"};if("default"===t.gameMode||b){v(!0);var a=function(e){console.log("DSB ~ file: network.ts ~ line 27 ~ connectToMatchmakerChannel ~ gameData",e);var t="",a=e.playerCount,n="btt";switch(e.gameMode){case"default":e.roomName?(t="garuda_matchmaker:".concat(e.roomName,":").concat(n,":").concat(a),e.roomName):t="garuda_matchmaker:".concat(n,":").concat(a);break;case"create":t="garuda_matchmaker:".concat(e.roomName,":").concat(n,":createjoin"),e.roomName;break;case"join":t="garuda_matchmaker:".concat(e.roomName,":").concat(n,":createjoin"),e.roomName,a=-1}var o={roomName:t,playerCount:a,matchId:e.roomName,gameMode:e.gameMode};return g.channel(t,{player_count:o.playerCount,room_name:o.roomName,match_id:o.matchId,mode:o.gameMode})}(t);a.join().receive("ok",(function(e){return console.log("Joined matchmaker",e),"ok"})),a.on("match_maker_event",(function(t){var n;console.log("On match maker event",t),a.leave(),n=t,e.push({pathname:"/game",state:{gameChannelData:n,playerName:y}})})),a.on("presence_state",(function(e){console.log("Presence",e)}))}},handleModeChange:function(e){N(""),_(2),l(e||"default")},roomName:b,handleOnChange:function(e){e.preventDefault(),N(e.target.value)}})]})},E=function(){return Object(n.jsx)("div",{children:"Lobby"})},T={},C=(a(38),function(e){var t=e.sign,a=e.index,o=e.canMove,c=e.backgroundColor;return Object(n.jsx)("div",{className:"square",onClick:function(){var e;o&&(null===(e=T.gameChannel)||void 0===e||e.push("move",{movedata:{pos:a}}))},style:{backgroundColor:c},children:Object(n.jsx)("div",{className:"sign",children:"0"!==t?t:""})})}),_=(a(39),function(e){for(var t=e.board,a=e.winPattern,o=e.canMove,c=[],l=1;l<=9;l++)c.push(l);return Object(n.jsx)("div",{className:"board",children:c.map((function(e){return Object(n.jsx)(C,{canMove:o,backgroundColor:(c=a,l=e-1,-1!==c.indexOf(l)?"#ffeaa7":"#E5E5E5"),sign:String(t[e-1]),index:e},Math.random());var c,l}))})});!function(e){e[e.PLACE_BET=0]="PLACE_BET",e[e.WAITING_FOR_OPPONENT_BET=1]="WAITING_FOR_OPPONENT_BET",e[e.OPPONENT_MOVE=2]="OPPONENT_MOVE",e[e.YOUR_MOVE=3]="YOUR_MOVE",e[e.YOU_WON=4]="YOU_WON",e[e.YOU_LOST=5]="YOU_LOST",e[e.NONE=6]="NONE"}(p||(p={})),function(e){e[e.BETTING=0]="BETTING",e[e.NOTICE=1]="NOTICE",e[e.GAMEOVER=2]="GAMEOVER"}(f||(f={})),function(e){e[e.BETTING=0]="BETTING",e[e.BET_WAITING=1]="BET_WAITING",e[e.MOVE_WAITING=2]="MOVE_WAITING",e[e.MOVING=3]="MOVING",e[e.GAMEOVER=4]="GAMEOVER"}(x||(x={}));a(40);var I=function(e){var t=e.name,a=e.balance,o=e.bet,c=e.gameState,l=e.style,s=c===x.BETTING||c===x.GAMEOVER?{display:"block"}:{display:"none"};return Object(n.jsxs)("div",{className:"hud",style:l,children:[Object(n.jsx)("div",{className:"name",children:t.toLocaleUpperCase()}),Object(n.jsxs)("div",{className:"balance",style:s,children:["BALANCE: ",String(a).padStart(3,"0")]}),Object(n.jsx)("div",{className:"bet",children:String(o).padStart(2,"0")})]})},k=(a(41),a(9)),y=function(e){var t=e.boardType,a=e.message,o=e.canClick,c=e.handlePlaceBetValueInput,l=e.placeBet,s={width:"212px",display:"block"},r={width:"0px",display:"none"},i={width:"50px",display:"block"},d=o?{backgroundColor:"rgb(255, 211, 105)"}:{backgroundColor:"#8395a7"},u=t===f.GAMEOVER?"GO":"BET";t===f.BETTING?(s={width:"212px",display:"block"},r={width:"0px",display:"none"},i={width:"50px",display:"block"}):t===f.NOTICE?(s={width:"0px",display:"none"},r={width:"262px",display:"flex"},i={width:"0px",display:"none"}):t===f.GAMEOVER&&(s={width:"0px",display:"none"},r={width:"212px",display:"flex"},i={width:"50px",display:"block"});var O="";return a===p.WAITING_FOR_OPPONENT_BET?O=k.en.waiting_for_op_bet:a===p.YOUR_MOVE?O=k.en.move:a===p.OPPONENT_MOVE?O=k.en.waiting_for_op_move:a===p.YOU_WON?O=k.en.you_won:a===p.YOU_LOST&&(O=k.en.you_lost),Object(n.jsxs)("div",{className:"status-board",children:[Object(n.jsx)("div",{className:"bet-input",style:s,children:Object(n.jsx)("input",{className:"bet-input",style:{width:"100%"},placeholder:"place your bet",type:"number",id:"betval",name:"betval",min:0,onChange:c,spellCheck:"false"})}),Object(n.jsx)("div",{className:"notice-board",style:r,children:Object(n.jsx)("div",{children:O})}),Object(n.jsx)("div",{className:"bet-btn",style:i,children:Object(n.jsx)("button",{className:"bet-btn",onClick:o?l:function(){},style:{backgroundColor:d.backgroundColor,width:"100%"},children:u})})]})},M=(a(42),function(){var e=Object(r.f)(),t=Object(r.g)(),a=Object(o.useState)(0),c=Object(i.a)(a,2),l=c[0],s=c[1],d=Object(o.useState)(f.BETTING),u=Object(i.a)(d,2),O=u[0],m=u[1],b=Object(o.useState)(p.PLACE_BET),j=Object(i.a)(b,2),N=j[0],v=j[1],E=Object(o.useState)(x.BETTING),C=Object(i.a)(E,2),k=C[0],M=C[1],G=Object(o.useState)(100),S=Object(i.a)(G,2),B=S[0],A=S[1],R=Object(o.useState)(!0),w=Object(i.a)(R,2),P=w[0],V=w[1],W=Object(o.useState)([0,0,0,0,0,0,0,0,0]),F=Object(i.a)(W,2),U=F[0],L=F[1],Y=Object(o.useState)(0),D=Object(i.a)(Y,2),q=D[0],J=D[1],X=Object(o.useState)(100),H=Object(i.a)(X,2),K=H[0],z=H[1],Q=Object(o.useState)(""),Z=Object(i.a)(Q,2),$=Z[0],ee=Z[1],te=Object(o.useState)([]),ae=Object(i.a)(te,2),ne=ae[0],oe=ae[1];if(Object(o.useEffect)((function(){t.state&&(T.gameChannel=function(e,t){console.log("DSB ~ file: network.ts ~ line 71 ~ connectToGameChannel ~ matchmakerChannelMessage",e);var a=e.match_id;return g.channel("".concat("btt",":").concat(a),{name:t})}(t.state.gameChannelData,t.state.playerName),T.gameChannel.join().receive("ok",(function(e){console.log("Joined game channel",e)})),T.gameChannel.on("start_game_event",(function(e){console.log("On start_game_event",e),e.gamestate.player_1.id===h?ee(e.gamestate.player_2.name):ee(e.gamestate.player_1.name),L(e.gamestate.board)})),T.gameChannel.on("bet_res",(function(e){console.log("bet_res",e),e.p1.id===h?(z(e.p2.balance),J(e.p2.bet)):(z(e.p1.balance),J(e.p1.bet)),"continue"===e.turn.id?(s(0),M(x.BETTING),v(p.PLACE_BET),m(f.BETTING)):e.turn.id===h?(M(x.MOVING),v(p.YOUR_MOVE)):(M(x.MOVE_WAITING),v(p.OPPONENT_MOVE))})),T.gameChannel.on("move_res",(function(e){console.log("DSB ~ file: index.tsx ~ line 97 ~ network.gameChannel.on ~ message",e);var t=e.board.map((function(e){return e===h?"X":0!==e?"O":0}));L(t),s(0),M(x.BETTING),m(f.BETTING),e.p1.id})),T.gameChannel.on("game_res",(function(e){console.log("DSB ~ file: index.tsx ~ line 112 ~ network.gameChannel.on ~ message",e),oe(e.pattern);var t=e.board.map((function(e){return e===h?"X":0!==e?"O":0}));L(t),m(f.GAMEOVER),M(x.GAMEOVER),e.winner===h?v(p.YOU_WON):v(p.YOU_LOST)})))}),[]),!t.state)return e.push({pathname:"/"}),Object(n.jsx)(n.Fragment,{});return Object(n.jsxs)("div",{className:"game",children:[Object(n.jsxs)("div",{className:"hud-container",children:[Object(n.jsx)(I,{name:t.state.playerName,bet:l,balance:B-l,gameState:k,style:{backgroundColor:"#FFD369"}}),Object(n.jsx)(I,{name:$,bet:k===x.BET_WAITING||k===x.BETTING?"...":q,balance:K,gameState:k,style:{backgroundColor:"#FFD369"}})]}),Object(n.jsx)(y,{boardType:O,canClick:P,message:N,handlePlaceBetValueInput:function(e){e.preventDefault();var t=Number(e.target.value);console.log(t),t>B||t<0?V(!1):(V(!0),s(Number(t)))},placeBet:k===x.GAMEOVER?function(){e.push({pathname:"/"})}:function(){var e;k===x.BETTING&&(null===(e=T.gameChannel)||void 0===e||e.push("bet",{betdata:{playerId:h,bet:l}}),A(B-l),M(x.BET_WAITING),m(f.NOTICE),v(p.WAITING_FOR_OPPONENT_BET))}}),Object(n.jsx)(_,{board:U,winPattern:ne,canMove:k===x.MOVING})]})}),G=function(e){return Object(n.jsx)(s.a,{children:Object(n.jsxs)(r.c,{children:[Object(n.jsx)(r.a,{exact:!0,path:"/",component:v}),Object(n.jsx)(r.a,{exact:!0,path:"/lobby",component:E}),Object(n.jsx)(r.a,{exact:!0,path:"/game",component:M})]})})},S=(a(43),function(){return Object(n.jsx)("div",{className:"App",children:Object(n.jsx)(G,{})})}),B=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,45)).then((function(t){var a=t.getCLS,n=t.getFID,o=t.getFCP,c=t.getLCP,l=t.getTTFB;a(e),n(e),o(e),c(e),l(e)}))};l.a.render(Object(n.jsx)(S,{}),document.getElementById("root")),B()}],[[44,1,2]]]);
//# sourceMappingURL=main.4f1062da.chunk.js.map