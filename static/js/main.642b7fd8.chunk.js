(this.webpackJsonpbettactoe=this.webpackJsonpbettactoe||[]).push([[0],{25:function(e,t,n){},26:function(e,t,n){},27:function(e,t,n){},28:function(e,t,n){},29:function(e,t,n){},30:function(e,t,n){},31:function(e,t,n){},37:function(e,t,n){},38:function(e,t,n){},39:function(e,t,n){},40:function(e,t,n){},41:function(e,t,n){},42:function(e,t,n){},43:function(e,t,n){},44:function(e,t,n){},45:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n(0),o=n.n(c),l=n(17),s=n.n(l),r=(n(25),n(12)),i=n(2),b=n(3),m=n(15),u=(n(26),function(e){return Object(a.jsx)("div",{className:"input-playername",children:Object(a.jsx)("input",{className:"pname-input-field",type:"text",id:"fname",name:"fname",value:e.value,onChange:e.handleChange})})}),d=(n(27),function(e){return Object(a.jsx)("div",{className:"logo",children:Object(a.jsx)("div",{className:"background",style:{backgroundColor:e.backgroundColor},children:Object(a.jsxs)("div",{className:"foreground",style:{color:e.foregroundColor},children:[Object(a.jsx)("div",{className:"logo-square top left",children:"B"}),Object(a.jsx)("div",{className:"logo-square top c",children:"E"}),Object(a.jsx)("div",{className:"logo-square top right",children:"T"}),Object(a.jsx)("div",{className:"logo-square m left",children:"T"}),Object(a.jsx)("div",{className:"logo-square m c",children:"A"}),Object(a.jsx)("div",{className:"logo-square m right",children:"C"}),Object(a.jsx)("div",{className:"logo-square bottom left",children:"T"}),Object(a.jsx)("div",{className:"logo-square bottom c",children:"O"}),Object(a.jsx)("div",{className:"logo-square bottom right",children:"E"})]})})})}),j=(n(28),function(e){return Object(a.jsx)("div",{className:"custom-button",children:Object(a.jsxs)("button",{className:"btn",onClick:e.onClick,children:[e.text," "]})})}),h=(n(29),function(e){return Object(a.jsxs)("div",{className:"menu-button",children:[Object(a.jsx)("div",{className:"input-component",style:{width:e.animate?e.shouldResetWidth?"0%":"67%":"0%"},children:Object(a.jsx)("input",{className:"rname-input-field",type:"text",id:e.text,placeholder:"Enter room name",value:e.roomName,onChange:e.handleOnChange,required:!0})}),Object(a.jsx)("div",{className:"btn-component",style:{width:e.animate?e.shouldResetWidth?"100%":"30%":"100%"},children:Object(a.jsx)(j,{text:e.animate?e.shouldResetWidth?e.text:"GO":e.shouldResetWidth?e.text:"CONFIRM ?",onClick:e.shouldResetWidth?function(){}:e.onClick})})]})}),O=(n(30),function(e){var t=Object(c.useState)(0),n=Object(b.a)(t,2),o=n[0],l=n[1],s=function(t,n){console.log("DSB ~ file: index.tsx ~ line 16 ~ setGameMode ~ mode",n),e.handleModeChange(n),l(t)};return Object(a.jsx)("div",{className:"menu-button-container",children:Object(a.jsxs)("div",{style:{width:"262px"},children:[Object(a.jsx)("div",{onClick:function(){return s(1,"create")},children:Object(a.jsx)(h,{onClick:e.onSubmit,text:"CREATE ROOM",animate:!0,shouldResetWidth:1!==o,handleOnChange:e.handleOnChange,roomName:e.roomName})}),Object(a.jsx)("div",{onClick:function(){return s(2,"join")},children:Object(a.jsx)(h,{onClick:e.onSubmit,text:"JOIN ROOM",animate:!0,shouldResetWidth:2!==o,handleOnChange:e.handleOnChange,roomName:e.roomName})}),Object(a.jsx)("div",{onClick:function(){return s(3,"default")},children:Object(a.jsx)(h,{onClick:e.onSubmit,text:"RANDOM",shouldResetWidth:3!==o,handleOnChange:e.handleOnChange,roomName:e.roomName,confirm:!0})})]})})}),g=String(Math.floor(1e5*Math.random())),p=n(18);console.log("connecting to btt server ....");var f=new p.Socket("wss://still-plains-97814.herokuapp.com/socket",{params:{playerId:g}});f.connect();n(31);var x=function(){var e=Object(i.f)(),t=Object(c.useState)(""),n=Object(b.a)(t,2),o=n[0],l=n[1],s=Object(c.useState)(""),r=Object(b.a)(s,2),j=r[0],h=r[1],p=Object(c.useState)(2),x=Object(b.a)(p,2),v=x[0],N=x[1],C=Object(c.useState)(String(g)),k=Object(b.a)(C,2),y=k[0],S=k[1],M=Object(c.useState)(!1),_=Object(b.a)(M,2),w=_[0],D=_[1],E=Object(m.b)({loading:!0,indicator:Object(a.jsx)(m.a,{width:"50"})}),T=(E.containerProps,E.indicatorEl);return Object(a.jsxs)("div",{className:"menu",children:[Object(a.jsx)(d,{backgroundColor:"#ffd369",foregroundColor:"#393e46"}),Object(a.jsx)(u,{value:y,handleChange:function(e){console.log(e.target.value),S(e.target.value)}}),w?Object(a.jsx)("div",{className:"searching",children:Object(a.jsx)("div",{children:T})}):Object(a.jsx)(O,{onSubmit:function(){var t={roomName:j,playerCount:v,gameMode:o||"default"};if("default"===t.gameMode||j){D(!0);var n=function(e){console.log("DSB ~ file: network.ts ~ line 27 ~ connectToMatchmakerChannel ~ gameData",e);var t="",n=e.playerCount,a="btt";switch(e.gameMode){case"default":e.roomName?(t="garuda_matchmaker:".concat(e.roomName,":").concat(a,":").concat(n),e.roomName):t="garuda_matchmaker:".concat(a,":").concat(n);break;case"create":t="garuda_matchmaker:".concat(e.roomName,":").concat(a,":createjoin"),e.roomName;break;case"join":t="garuda_matchmaker:".concat(e.roomName,":").concat(a,":createjoin"),e.roomName,n=-1}var c={roomName:t,playerCount:n,matchId:e.roomName,gameMode:e.gameMode};return f.channel(t,{player_count:c.playerCount,room_name:c.roomName,match_id:c.matchId,mode:c.gameMode})}(t);n.join().receive("ok",(function(e){return console.log("Joined matchmaker",e),"ok"})),n.on("match_maker_event",(function(t){var a;console.log("On match maker event",t),n.leave(),a=t,e.push({pathname:"/game",state:{gameChannelData:a,playerName:y}})}))}},handleModeChange:function(e){h(""),N(2),console.log("GAME MODE ",e||"default"),l(e||"default")},roomName:j,handleOnChange:function(e){e.preventDefault(),h(e.target.value)}})]})},v=function(){return Object(a.jsx)("div",{children:"Lobby"})},N={},C=(n(37),function(e){var t=e.value;return Object(a.jsxs)("button",{className:"square",onClick:function(){var t;e.canMove&&(null===(t=N.gameChannel)||void 0===t||t.push("move",{movedata:{pos:e.pos}}))},children:["0"===t&&"",t===g&&"X",t!==g&&"0"!==t&&"O"]})}),k=(n(38),function(e){for(var t=e.canMove,n=e.board,c=[],o=1;o<=9;o++)c.push(o);return Object(a.jsx)("div",{className:"board",children:c.map((function(e){return Object(a.jsx)(C,{value:n[e-1],pos:e,canMove:t},e)}))})}),y=o.a.createContext({playerName:"",opponentName:""}),S=(n(39),function(e){var t=function(t){e.canBet&&e.onClick(t)};return Object(a.jsxs)("div",{className:"bet-controller",style:{opacity:e.canBet?1:0},children:[Object(a.jsx)("div",{className:"up",onClick:function(){return t(1)},children:"U"}),Object(a.jsx)("div",{className:"down",onClick:function(){return t(-1)},children:"D"})]})}),M=(n(40),function(e){return Object(a.jsxs)("div",{className:"player-hud",children:[Object(a.jsx)("div",{className:"name",children:e.name}),e.lid?Object(a.jsx)("div",{className:"waiting-lig",children:"WAITING"}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("div",{className:"balance",children:e.balance}),Object(a.jsx)("div",{className:"bet",children:e.bet})]})]})}),_=(n(41),function(e){var t=e.canBet,n=(e.setBetAmount,e.isOpponentVisible),o=e.opponentData,l=e.playerData,s=e.betController,r=Object(c.useContext)(y);return Object(a.jsxs)("div",{className:"hud",children:[Object(a.jsx)(M,{balance:l.balance,bet:l.bet,name:r.playerName}),Object(a.jsx)(S,{canBet:t,onClick:function(e){return s(e)}}),Object(a.jsx)(M,{balance:o.balance,bet:o.bet,lid:!n,name:r.opponentName})]})}),w=(n(42),function(e){var t="";return e.winner===g?("won",t="CONGRATULATIONS! YOU WON"):("lost",t="BETTER LUCK NEXT TIME!"),Object(a.jsx)("div",{className:"result-comp",children:t})}),D=(n(43),function(){var e=Object(i.f)(),t=Object(i.g)();console.log("DSB ~ file: index.tsx ~ line 32 ~ Game ~ location",t),t.state||e.push({pathname:"/"});var n=Object(c.useState)("OPPONENT"),o=Object(b.a)(n,2),l=o[0],s=o[1],r=Object(c.useState)(!1),m=Object(b.a)(r,2),u=m[0],d=m[1],j=Object(c.useState)(!0),h=Object(b.a)(j,2),O=h[0],p=h[1],x=Object(c.useState)(!1),v=Object(b.a)(x,2),C=v[0],S=v[1],M=Object(c.useState)(!1),D=Object(b.a)(M,2),E=D[0],T=D[1],B=Object(c.useState)(0),R=Object(b.a)(B,2),I=R[0],A=R[1],W=Object(c.useState)({bet:0,balance:100}),q=Object(b.a)(W,2),F=q[0],G=q[1],P=Object(c.useState)({bet:0,balance:100}),L=Object(b.a)(P,2),U=L[0],J=L[1],V=Object(c.useState)(["0","0","0","0","0","0","0","0","0"]),Y=Object(b.a)(V,2),X=Y[0],H=Y[1],K=Object(c.useState)(!1),z=Object(b.a)(K,2),Q=z[0],Z=z[1],$=Object(c.useState)(""),ee=Object(b.a)($,2),te=ee[0],ne=ee[1];Object(c.useEffect)((function(){t.state&&(N.gameChannel=function(e,t){console.log("DSB ~ file: network.ts ~ line 71 ~ connectToGameChannel ~ matchmakerChannelMessage",e);var n=e.match_id;return f.channel("".concat("btt",":").concat(n),{name:t})}(t.state.gameChannelData,t.state.playerName),N.gameChannel.join().receive("ok",(function(e){console.log("Joined game channel",e)})),N.gameChannel.on("start_game_event",(function(e){console.log("On start_game_event",e),e.gamestate.player_1.id===g?s(e.gamestate.player_2.name):s(e.gamestate.player_1.name),d(!0)})),N.gameChannel.on("bet_res",(function(e){console.log("bet_res",e),e.p1.id===g?(G({bet:e.p2.bet,balance:e.p2.balance}),J({bet:e.p1.bet,balance:e.p1.balance})):(G({bet:e.p1.bet,balance:e.p1.balance}),J({bet:e.p2.bet,balance:e.p2.balance})),console.log("DSB ~ file: index.tsx ~ line 60 ~ network.gameChannel.on ~ message.turn",e.turn),console.log("DSB ~ file: index.tsx ~ line 61 ~ network.gameChannel.on ~ PLAYER_ID",g),e.turn.id===g?(S(!0),console.log("YOU CAN MOVE")):(S(!1),console.log("YOU CAN NOT MOVE")),T(!0),p(!1)})),N.gameChannel.on("move_res",(function(e){console.log("move_res",e);var t=e.board.map((function(e){return String(e)}));e.p1.id===g?(G({bet:e.p2.bet,balance:e.p2.balance}),J({bet:0,balance:e.p1.balance})):(G({bet:e.p1.bet,balance:e.p1.balance}),J({bet:0,balance:e.p2.balance})),H(t),p(!0),S(!1),T(!1)})),N.gameChannel.on("game_res",(function(e){console.log("game_res",e),ne(e.winner);var t=e.board.map((function(e){return String(e)}));H(t),p(!1),S(!1),Z(!0)})))}),[]);return Object(a.jsxs)("div",{className:"game",children:[!u&&Object(a.jsx)("div",{className:"waiting",children:"WAITING..."}),u&&Object(a.jsxs)("div",{className:"start-game",children:[Object(a.jsx)(y.Provider,{value:{playerName:t.state.playerName,opponentName:l},children:Object(a.jsx)(_,{canBet:O,setBetAmount:A,isOpponentVisible:E,opponentData:F,playerData:U,betController:function(e){return function(e){var t=Math.max(0,Math.min(U.balance,U.balance-e)),n=Math.max(0,Math.min(U.balance,U.bet+e));J({bet:n,balance:t}),A(n)}(e)}})}),Object(a.jsx)("div",{className:"bet-confirm",style:{opacity:O?1:0},children:Object(a.jsx)("button",{className:"btn-bet-confirm",onClick:function(){var e;O&&(console.log(I),p(!1),S(!1),null===(e=N.gameChannel)||void 0===e||e.push("bet",{betdata:{playerId:g,bet:I}}))},children:"CONFIRM"})}),Object(a.jsx)(k,{canMove:C,board:X}),Q&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(w,{winner:te}),Object(a.jsx)("button",{className:"btn-go-home",onClick:function(){e.push({pathname:"/"})},children:"NEW MATCH"})]})]})]})}),E=function(e){return Object(a.jsx)(r.a,{children:Object(a.jsxs)(i.c,{children:[Object(a.jsx)(i.a,{exact:!0,path:"/",component:x}),Object(a.jsx)(i.a,{exact:!0,path:"/lobby",component:v}),Object(a.jsx)(i.a,{exact:!0,path:"/game",component:D})]})})},T=(n(44),function(){return Object(a.jsx)("div",{className:"App",children:Object(a.jsx)(E,{})})}),B=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,46)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,o=t.getLCP,l=t.getTTFB;n(e),a(e),c(e),o(e),l(e)}))};s.a.render(Object(a.jsx)(T,{}),document.getElementById("root")),B()}},[[45,1,2]]]);
//# sourceMappingURL=main.642b7fd8.chunk.js.map