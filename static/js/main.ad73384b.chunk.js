(this.webpackJsonpbettactoe=this.webpackJsonpbettactoe||[]).push([[0],[,,,,,,,,function(e){e.exports=JSON.parse('{"en":{"place_bet":"place your bet","waiting_for_op_bet":"WAITING FOR OPPONENT\'S BET","waiting_for_op_move":"WAITING FOR OPPONENT\'S MOVE","move":"MAKE YOU MOVE NOW","you_won":"CONGRATULATIONS! AGAIN?","you_lost":"TRY AGAIN?","bet":"BET","go":"GO","equal_bet":"equal bets!"}}')},,,,,,,,,,,,,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(1),c=n(0),o=n(18),l=n.n(o),s=(n(26),n(13)),i=n(2),r=n(3),d=n(16),u=(n(27),function(e){return Object(a.jsxs)("div",{className:"input-playername",children:[Object(a.jsx)("label",{className:"name-label",htmlFor:"fname",children:"name"}),Object(a.jsx)("input",{className:"pname-input-field",placeholder:"your name",type:"text",id:"fname",name:"fname",value:e.value,onChange:e.handleChange,spellCheck:"false"})]})}),b=(n(28),function(e){return Object(a.jsx)("div",{className:"logo",children:Object(a.jsx)("div",{className:"background",style:{backgroundColor:e.backgroundColor},children:Object(a.jsxs)("div",{className:"foreground",style:{color:e.foregroundColor},children:[Object(a.jsx)("div",{className:"logo-square top left",children:"B"}),Object(a.jsx)("div",{className:"logo-square top c",children:"E"}),Object(a.jsx)("div",{className:"logo-square top right",children:"T"}),Object(a.jsx)("div",{className:"logo-square m left",children:"T"}),Object(a.jsx)("div",{className:"logo-square m c",children:"A"}),Object(a.jsx)("div",{className:"logo-square m right",children:"C"}),Object(a.jsx)("div",{className:"logo-square bottom left",children:"T"}),Object(a.jsx)("div",{className:"logo-square bottom c",children:"O"}),Object(a.jsx)("div",{className:"logo-square bottom right",children:"E"})]})})})}),O=(n(29),function(e){return Object(a.jsx)("div",{className:"custom-button",children:Object(a.jsxs)("button",{className:"btn",onClick:e.onClick,style:{backgroundColor:e.backgroundColor||"#e5e5e5"},children:[e.text," "]})})}),m=(n(30),function(e){return Object(a.jsxs)("div",{className:"menu-button",children:[Object(a.jsx)("div",{className:"input-component",style:{width:e.animate?e.shouldResetWidth?"0%":"70%":"0%"},children:Object(a.jsx)("input",{className:"rname-input-field",type:"text",id:e.text,placeholder:"Enter room name",value:e.roomName,onChange:e.handleOnChange,spellCheck:"false",required:!0})}),Object(a.jsx)("div",{className:"btn-component",style:{width:e.animate?e.shouldResetWidth?"100%":"30%":"100%"},children:Object(a.jsx)(O,{text:e.animate?e.shouldResetWidth?e.text:"GO":e.shouldResetWidth?e.text:"CONFIRM ?",onClick:e.shouldResetWidth?function(){}:e.onClick,backgroundColor:e.shouldResetWidth?"":"#ffd369"})})]})}),j=(n(31),function(e){var t=Object(c.useState)(0),n=Object(r.a)(t,2),o=n[0],l=n[1],s=function(t,n){console.log("DSB ~ file: index.tsx ~ line 16 ~ setGameMode ~ mode",n),e.handleModeChange(n),l(t)};return Object(a.jsx)("div",{className:"menu-button-container",children:Object(a.jsxs)("div",{style:{width:"262px"},children:[Object(a.jsx)("div",{onClick:function(){return s(1,"create")},children:Object(a.jsx)(m,{onClick:e.onSubmit,text:"CREATE ROOM",animate:!0,shouldResetWidth:1!==o,handleOnChange:e.handleOnChange,roomName:e.roomName})}),Object(a.jsx)("div",{onClick:function(){return s(2,"join")},children:Object(a.jsx)(m,{onClick:e.onSubmit,text:"JOIN ROOM",animate:!0,shouldResetWidth:2!==o,handleOnChange:e.handleOnChange,roomName:e.roomName})}),Object(a.jsx)("div",{onClick:function(){return s(3,"default")},children:Object(a.jsx)(m,{onClick:e.onSubmit,text:"RANDOM ROOM",shouldResetWidth:3!==o,handleOnChange:e.handleOnChange,roomName:e.roomName,confirm:!0})})]})})}),h=String(Math.floor(1e5*Math.random())),g=n(19);console.log("connecting to btt server ....");var N=new g.Socket("ws://localhost:4000/socket",{params:{playerId:h}});N.connect();n(32);var f,p,x,v=function(){var e=Object(i.f)(),t=Object(c.useState)(""),n=Object(r.a)(t,2),o=n[0],l=n[1],s=Object(c.useState)(""),m=Object(r.a)(s,2),g=m[0],f=m[1],p=Object(c.useState)(!1),x=Object(r.a)(p,2),v=x[0],E=x[1],T=Object(c.useState)(2),C=Object(r.a)(T,2),_=C[0],k=C[1],y=Object(c.useState)(localStorage.getItem("btt-name")||String(h)),I=Object(r.a)(y,2),S=I[0],M=I[1],G=Object(c.useState)(),A=Object(r.a)(G,2),B=A[0],R=A[1],w=Object(c.useState)(),P=Object(r.a)(w,2),V=(P[0],P[1]),W=Object(c.useState)(0),L=Object(r.a)(W,2),U=(L[0],L[1],{}),F=Object(c.useState)([]),D=Object(r.a)(F,2),q=D[0],Y=D[1];Object(c.useEffect)((function(){var e=N.channel("lobby:btt",{playerId:h});e.join().receive("ok",(function(e){return console.log("Joined Lobby",e),"ok"})),e.on("presence_game_state",(function(e){for(var t=Object.keys(e),n=0;n<t.length;n++)U[t[n]]=1,Y(Object.keys(U))})),e.on("presence_diff",(function(e){for(var t=Object.keys(e.joins),n=Object.keys(e.leaves),a=0;a<t.length;a++)U[t[a]]||(U[t[a]]=1);for(var c=0;c<n.length;c++)if(U[n[c]]){var o=n[c];delete U[o]}Y(Object.keys(U)),console.log("DSB ~ file: index.tsx ~ line 62 ~ lobby.on ~ Object.keys(players)",Object.keys(U))})),e.on("presence_state",(function(e){console.log("STATE",e)})),V(e)}),[]);var J=Object(d.b)({loading:!0,indicator:Object(a.jsx)(d.a,{width:"20"})});J.containerProps,J.indicatorEl;return Object(a.jsxs)("div",{className:"menu",children:[Object(a.jsx)(b,{backgroundColor:"#ffd369",foregroundColor:"#393e46"}),Object(a.jsx)(u,{value:S,handleChange:function(e){M(e.target.value),localStorage.setItem("btt-name",e.target.value)}}),v?Object(a.jsxs)("div",{className:"searching",children:[Object(a.jsxs)("div",{className:"searching-text",children:["SEARCHING",Object(a.jsx)("div",{className:"loading"})]}),Object(a.jsx)("div",{className:"btn-component",style:{width:"100%"},children:Object(a.jsx)(O,{text:"CANCEL MATCHMAKING",onClick:function(){null===B||void 0===B||B.leave(),E(!1)},backgroundColor:"#fefefe"})})]}):Object(a.jsxs)("div",{children:[Object(a.jsxs)("div",{className:"online-count",children:[Object(a.jsx)("span",{className:"logged-in",children:"\u25cf"}),Object(a.jsxs)("div",{className:"online-txt",children:["online ",q.length]})]}),Object(a.jsx)(j,{onSubmit:function(){var t={roomName:g,playerCount:_,gameMode:o||"default"};if("default"===t.gameMode||g){E(!0);var n=function(e){console.log("DSB ~ file: network.ts ~ line 27 ~ connectToMatchmakerChannel ~ gameData",e);var t="",n=e.playerCount,a="btt";switch(e.gameMode){case"default":e.roomName?(t="garuda_matchmaker:".concat(e.roomName,":").concat(a,":").concat(n),e.roomName):t="garuda_matchmaker:".concat(a,":").concat(n);break;case"create":t="garuda_matchmaker:".concat(e.roomName,":").concat(a,":createjoin"),e.roomName;break;case"join":t="garuda_matchmaker:".concat(e.roomName,":").concat(a,":createjoin"),e.roomName,n=-1}var c={roomName:t,playerCount:n,matchId:e.roomName,gameMode:e.gameMode};return N.channel(t,{player_count:c.playerCount,room_name:c.roomName,match_id:c.matchId,mode:c.gameMode})}(t);n.join().receive("ok",(function(e){return console.log("Joined matchmaker",e),"ok"})),n.on("match_maker_event",(function(t){var a;console.log("On match maker event",t),n.leave(),a=t,e.push({pathname:"/game",state:{gameChannelData:a,playerName:S}})})),R(n)}},handleModeChange:function(e){f(""),k(2),l(e||"default")},roomName:g,handleOnChange:function(e){e.preventDefault(),f(e.target.value)}})]})]})},E=function(){return Object(a.jsx)("div",{children:"Lobby"})},T={},C=(n(38),function(e){var t=e.sign,n=e.index,c=e.canMove,o=e.backgroundColor;return Object(a.jsx)("div",{className:"square",onClick:function(){var e;c&&(null===(e=T.gameChannel)||void 0===e||e.push("move",{movedata:{pos:n}}))},style:{backgroundColor:o},children:Object(a.jsx)("div",{className:"sign",children:"0"!==t?t:""})})}),_=(n(39),function(e){for(var t=e.board,n=e.winPattern,c=e.canMove,o=[],l=1;l<=9;l++)o.push(l);return Object(a.jsx)("div",{className:"board",children:o.map((function(e){return Object(a.jsx)(C,{canMove:c,backgroundColor:(o=n,l=e-1,-1!==o.indexOf(l)?"#ffeaa7":"#E5E5E5"),sign:String(t[e-1]),index:e},Math.random());var o,l}))})});!function(e){e[e.PLACE_BET=0]="PLACE_BET",e[e.WAITING_FOR_OPPONENT_BET=1]="WAITING_FOR_OPPONENT_BET",e[e.OPPONENT_MOVE=2]="OPPONENT_MOVE",e[e.YOUR_MOVE=3]="YOUR_MOVE",e[e.YOU_WON=4]="YOU_WON",e[e.YOU_LOST=5]="YOU_LOST",e[e.EQUAL_BETS=6]="EQUAL_BETS",e[e.NONE=7]="NONE"}(f||(f={})),function(e){e[e.BETTING=0]="BETTING",e[e.NOTICE=1]="NOTICE",e[e.GAMEOVER=2]="GAMEOVER"}(p||(p={})),function(e){e[e.BETTING=0]="BETTING",e[e.BET_WAITING=1]="BET_WAITING",e[e.MOVE_WAITING=2]="MOVE_WAITING",e[e.MOVING=3]="MOVING",e[e.GAMEOVER=4]="GAMEOVER"}(x||(x={}));n(40);var k=function(e){var t=e.name,n=e.balance,c=e.bet,o=e.gameState,l=e.style,s=o===x.BETTING||o===x.GAMEOVER?{display:"block"}:{display:"none"};return Object(a.jsxs)("div",{className:"hud",style:l,children:[Object(a.jsx)("div",{className:"name",children:t.toLocaleUpperCase()}),Object(a.jsxs)("div",{className:"balance",style:s,children:["BALANCE: ",String(n).padStart(3,"0")]}),Object(a.jsx)("div",{className:"bet",children:String(c).padStart(2,"0")})]})},y=(n(41),n(8)),I=function(e){var t=e.boardType,n=e.message,o=e.canClick,l=e.handlePlaceBetValueInput,s=e.placeBet,i=Object(c.useRef)(null),r={width:"212px",display:"block"},d={width:"0px",display:"none"},u={width:"50px",display:"block"},b=o?{backgroundColor:"rgb(255, 211, 105)"}:{backgroundColor:"#8395a7"},O=t===p.GAMEOVER?"GO":"BET";t===p.BETTING?(r={width:"212px",display:"block"},d={width:"0px",display:"none"},u={width:"50px",display:"block"}):t===p.NOTICE?(r={width:"0px",display:"none"},d={width:"262px",display:"flex"},u={width:"0px",display:"none"}):t===p.GAMEOVER&&(r={width:"0px",display:"none"},d={width:"212px",display:"flex"},u={width:"50px",display:"block"});var m="";n===f.WAITING_FOR_OPPONENT_BET?m=y.en.waiting_for_op_bet:n===f.YOUR_MOVE?m=y.en.move:n===f.OPPONENT_MOVE?m=y.en.waiting_for_op_move:n===f.YOU_WON?m=y.en.you_won:n===f.EQUAL_BETS?m=y.en.equal_bet:n===f.PLACE_BET?m=y.en.place_bet:n===f.YOU_LOST&&(m=y.en.you_lost);return Object(a.jsxs)("div",{className:"status-board",children:[Object(a.jsx)("div",{className:"bet-input",style:r,children:Object(a.jsx)("input",{className:"bet-input",ref:i,style:{width:"100%"},placeholder:m,type:"number",id:"betval",name:"betval",min:0,onChange:l,spellCheck:"false"})}),Object(a.jsx)("div",{className:"notice-board",style:d,children:Object(a.jsx)("div",{children:m})}),Object(a.jsx)("div",{className:"bet-btn",style:u,children:Object(a.jsx)("button",{className:"bet-btn",onClick:o?function(){i.current&&(console.log("ICI",i.current.value),i.current.value=void 0),s()}:function(){},style:{backgroundColor:b.backgroundColor,width:"100%"},children:O})})]})},S=(n(42),function(){var e=Object(i.f)(),t=Object(i.g)(),n=Object(c.useState)(0),o=Object(r.a)(n,2),l=o[0],s=o[1],d=Object(c.useState)(p.BETTING),u=Object(r.a)(d,2),b=u[0],O=u[1],m=Object(c.useState)(f.PLACE_BET),j=Object(r.a)(m,2),g=j[0],v=j[1],E=Object(c.useState)(x.BETTING),C=Object(r.a)(E,2),y=C[0],S=C[1],M=Object(c.useState)(100),G=Object(r.a)(M,2),A=G[0],B=G[1],R=Object(c.useState)(!0),w=Object(r.a)(R,2),P=w[0],V=w[1],W=Object(c.useState)([0,0,0,0,0,0,0,0,0]),L=Object(r.a)(W,2),U=L[0],F=L[1],D=Object(c.useState)(0),q=Object(r.a)(D,2),Y=q[0],J=q[1],Q=Object(c.useState)(100),H=Object(r.a)(Q,2),K=H[0],X=H[1],z=Object(c.useState)(""),Z=Object(r.a)(z,2),$=Z[0],ee=Z[1],te=Object(c.useState)([]),ne=Object(r.a)(te,2),ae=ne[0],ce=ne[1];if(Object(c.useEffect)((function(){t.state&&(T.gameChannel=function(e,t){console.log("DSB ~ file: network.ts ~ line 71 ~ connectToGameChannel ~ matchmakerChannelMessage",e);var n=e.match_id;return N.channel("".concat("btt",":").concat(n),{name:t})}(t.state.gameChannelData,t.state.playerName),T.gameChannel.join().receive("ok",(function(e){console.log("Joined game channel",e)})),T.gameChannel.on("start_game_event",(function(e){console.log("On start_game_event",e),e.gamestate.player_1.id===h?ee(e.gamestate.player_2.name):ee(e.gamestate.player_1.name),F(e.gamestate.board)})),T.gameChannel.on("bet_res",(function(e){console.log("bet_res",e),e.p1.id===h?(X(e.p2.balance),J(e.p2.bet)):(X(e.p1.balance),J(e.p1.bet)),"continue"===e.turn.id?(s(0),S(x.BETTING),v(f.EQUAL_BETS),O(p.BETTING)):e.turn.id===h?(S(x.MOVING),v(f.YOUR_MOVE)):(S(x.MOVE_WAITING),v(f.OPPONENT_MOVE))})),T.gameChannel.on("move_res",(function(e){console.log("DSB ~ file: index.tsx ~ line 97 ~ network.gameChannel.on ~ message",e);var t=e.board.map((function(e){return e===h?"X":0!==e?"O":0}));F(t),s(0),S(x.BETTING),O(p.BETTING),v(f.PLACE_BET),e.p1.id})),T.gameChannel.on("game_res",(function(e){console.log("DSB ~ file: index.tsx ~ line 112 ~ network.gameChannel.on ~ message",e),ce(e.pattern);var t=e.board.map((function(e){return e===h?"X":0!==e?"O":0}));F(t),O(p.GAMEOVER),S(x.GAMEOVER),e.winner===h?v(f.YOU_WON):v(f.YOU_LOST)})))}),[]),!t.state)return e.push({pathname:"/"}),Object(a.jsx)(a.Fragment,{});return Object(a.jsxs)("div",{className:"game",children:[Object(a.jsxs)("div",{className:"hud-container",children:[Object(a.jsx)(k,{name:t.state.playerName,bet:l,balance:A-l,gameState:y,style:{backgroundColor:"#FFD369"}}),Object(a.jsx)(k,{name:$,bet:y===x.BET_WAITING||y===x.BETTING?"...":Y,balance:K,gameState:y,style:{backgroundColor:"#FFD369"}})]}),Object(a.jsx)(I,{boardType:b,canClick:P,message:g,handlePlaceBetValueInput:function(e){e.preventDefault();var t=Number(e.target.value);console.log(t),t>A||t<0?V(!1):(V(!0),s(Number(t)))},placeBet:y===x.GAMEOVER?function(){e.push({pathname:"/"})}:function(){var e;y===x.BETTING&&(null===(e=T.gameChannel)||void 0===e||e.push("bet",{betdata:{playerId:h,bet:l}}),B(A-l),S(x.BET_WAITING),O(p.NOTICE),v(f.WAITING_FOR_OPPONENT_BET))}}),Object(a.jsx)(_,{board:U,winPattern:ae,canMove:y===x.MOVING})]})}),M=function(e){return Object(a.jsx)(s.a,{children:Object(a.jsxs)(i.c,{children:[Object(a.jsx)(i.a,{exact:!0,path:"/",component:v}),Object(a.jsx)(i.a,{exact:!0,path:"/lobby",component:E}),Object(a.jsx)(i.a,{exact:!0,path:"/game",component:S})]})})},G=(n(43),function(){return Object(a.jsx)("div",{className:"App",children:Object(a.jsx)(M,{})})}),A=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,45)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,o=t.getLCP,l=t.getTTFB;n(e),a(e),c(e),o(e),l(e)}))};l.a.render(Object(a.jsx)(G,{}),document.getElementById("root")),A()}],[[44,1,2]]]);
//# sourceMappingURL=main.ad73384b.chunk.js.map