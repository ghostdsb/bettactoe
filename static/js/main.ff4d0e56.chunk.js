(this.webpackJsonpbettactoe=this.webpackJsonpbettactoe||[]).push([[0],[,,,,,,,,function(e){e.exports=JSON.parse('{"en":{"place_bet":"place your bet","waiting_for_op_bet":"WAITING FOR OPPONENT\'S BET","waiting_for_op_move":"WAITING FOR OPPONENT\'S MOVE","move":"MAKE YOU MOVE NOW","you_won":"CONGRATULATIONS! AGAIN?","you_lost":"TRY AGAIN?","bet":"BET","go":"GO","equal_bet":"equal bets!"}}')},,,,,,,,,,,,,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(1),c=n(0),o=n(18),l=n.n(o),s=(n(26),n(13)),r=n(2),i=n(3),d=n(16),u=(n(27),function(e){return Object(a.jsx)("div",{className:"input-playername",children:Object(a.jsx)("input",{className:"pname-input-field",placeholder:"your name",type:"text",id:"fname",name:"fname",value:e.value,onChange:e.handleChange,spellCheck:"false"})})}),O=(n(28),function(e){return Object(a.jsx)("div",{className:"logo",children:Object(a.jsx)("div",{className:"background",style:{backgroundColor:e.backgroundColor},children:Object(a.jsxs)("div",{className:"foreground",style:{color:e.foregroundColor},children:[Object(a.jsx)("div",{className:"logo-square top left",children:"B"}),Object(a.jsx)("div",{className:"logo-square top c",children:"E"}),Object(a.jsx)("div",{className:"logo-square top right",children:"T"}),Object(a.jsx)("div",{className:"logo-square m left",children:"T"}),Object(a.jsx)("div",{className:"logo-square m c",children:"A"}),Object(a.jsx)("div",{className:"logo-square m right",children:"C"}),Object(a.jsx)("div",{className:"logo-square bottom left",children:"T"}),Object(a.jsx)("div",{className:"logo-square bottom c",children:"O"}),Object(a.jsx)("div",{className:"logo-square bottom right",children:"E"})]})})})}),m=(n(29),function(e){return Object(a.jsx)("div",{className:"custom-button",children:Object(a.jsxs)("button",{className:"btn",onClick:e.onClick,style:{backgroundColor:e.backgroundColor||"#e5e5e5"},children:[e.text," "]})})}),b=(n(30),function(e){return Object(a.jsxs)("div",{className:"menu-button",children:[Object(a.jsx)("div",{className:"input-component",style:{width:e.animate?e.shouldResetWidth?"0%":"70%":"0%"},children:Object(a.jsx)("input",{className:"rname-input-field",type:"text",id:e.text,placeholder:"Enter room name",value:e.roomName,onChange:e.handleOnChange,spellCheck:"false",required:!0})}),Object(a.jsx)("div",{className:"btn-component",style:{width:e.animate?e.shouldResetWidth?"100%":"30%":"100%"},children:Object(a.jsx)(m,{text:e.animate?e.shouldResetWidth?e.text:"GO":e.shouldResetWidth?e.text:"CONFIRM ?",onClick:e.shouldResetWidth?function(){}:e.onClick,backgroundColor:e.shouldResetWidth?"":"#ffd369"})})]})}),j=(n(31),function(e){var t=Object(c.useState)(0),n=Object(i.a)(t,2),o=n[0],l=n[1],s=function(t,n){console.log("DSB ~ file: index.tsx ~ line 16 ~ setGameMode ~ mode",n),e.handleModeChange(n),l(t)};return Object(a.jsx)("div",{className:"menu-button-container",children:Object(a.jsxs)("div",{style:{width:"262px"},children:[Object(a.jsx)("div",{onClick:function(){return s(1,"create")},children:Object(a.jsx)(b,{onClick:e.onSubmit,text:"CREATE ROOM",animate:!0,shouldResetWidth:1!==o,handleOnChange:e.handleOnChange,roomName:e.roomName})}),Object(a.jsx)("div",{onClick:function(){return s(2,"join")},children:Object(a.jsx)(b,{onClick:e.onSubmit,text:"JOIN ROOM",animate:!0,shouldResetWidth:2!==o,handleOnChange:e.handleOnChange,roomName:e.roomName})}),Object(a.jsx)("div",{onClick:function(){return s(3,"default")},children:Object(a.jsx)(b,{onClick:e.onSubmit,text:"RANDOM ROOM",shouldResetWidth:3!==o,handleOnChange:e.handleOnChange,roomName:e.roomName,confirm:!0})})]})})}),h=String(Math.floor(1e5*Math.random())),N=n(19);console.log("connecting to btt server ....");var g=new N.Socket("wss://still-plains-97814.herokuapp.com/socket",{params:{playerId:h}});g.connect();n(32);var p,f,x,v=function(){var e=Object(r.f)(),t=Object(c.useState)(""),n=Object(i.a)(t,2),o=n[0],l=n[1],s=Object(c.useState)(""),b=Object(i.a)(s,2),N=b[0],p=b[1],f=Object(c.useState)(!1),x=Object(i.a)(f,2),v=x[0],E=x[1],C=Object(c.useState)(2),T=Object(i.a)(C,2),_=T[0],I=T[1],k=Object(c.useState)(localStorage.getItem("btt-name")||String(h)),y=Object(i.a)(k,2),S=y[0],M=y[1],G=Object(c.useState)(),A=Object(i.a)(G,2),B=A[0],R=A[1],w=Object(d.b)({loading:!0,indicator:Object(a.jsx)(d.a,{width:"20"})}),P=(w.containerProps,w.indicatorEl);return Object(a.jsxs)("div",{className:"menu",children:[Object(a.jsx)(O,{backgroundColor:"#ffd369",foregroundColor:"#393e46"}),Object(a.jsx)(u,{value:S,handleChange:function(e){M(e.target.value),localStorage.setItem("btt-name",e.target.value)}}),v?Object(a.jsxs)("div",{className:"searching",children:[Object(a.jsxs)("div",{className:"searching-text",children:[Object(a.jsx)("div",{children:P}),"SEARCHING",Object(a.jsx)("div",{children:P})]}),Object(a.jsx)("div",{className:"btn-component",style:{width:"100%"},children:Object(a.jsx)(m,{text:"CANCEL MATCHMAKING",onClick:function(){null===B||void 0===B||B.leave(),E(!1)},backgroundColor:"#fefefe"})})]}):Object(a.jsx)(j,{onSubmit:function(){var t={roomName:N,playerCount:_,gameMode:o||"default"};if("default"===t.gameMode||N){E(!0);var n=function(e){console.log("DSB ~ file: network.ts ~ line 27 ~ connectToMatchmakerChannel ~ gameData",e);var t="",n=e.playerCount,a="btt";switch(e.gameMode){case"default":e.roomName?(t="garuda_matchmaker:".concat(e.roomName,":").concat(a,":").concat(n),e.roomName):t="garuda_matchmaker:".concat(a,":").concat(n);break;case"create":t="garuda_matchmaker:".concat(e.roomName,":").concat(a,":createjoin"),e.roomName;break;case"join":t="garuda_matchmaker:".concat(e.roomName,":").concat(a,":createjoin"),e.roomName,n=-1}var c={roomName:t,playerCount:n,matchId:e.roomName,gameMode:e.gameMode};return g.channel(t,{player_count:c.playerCount,room_name:c.roomName,match_id:c.matchId,mode:c.gameMode})}(t);n.join().receive("ok",(function(e){return console.log("Joined matchmaker",e),"ok"})),n.on("match_maker_event",(function(t){var a;console.log("On match maker event",t),n.leave(),a=t,e.push({pathname:"/game",state:{gameChannelData:a,playerName:S}})})),R(n)}},handleModeChange:function(e){p(""),I(2),l(e||"default")},roomName:N,handleOnChange:function(e){e.preventDefault(),p(e.target.value)}})]})},E=function(){return Object(a.jsx)("div",{children:"Lobby"})},C={},T=(n(38),function(e){var t=e.sign,n=e.index,c=e.canMove,o=e.backgroundColor;return Object(a.jsx)("div",{className:"square",onClick:function(){var e;c&&(null===(e=C.gameChannel)||void 0===e||e.push("move",{movedata:{pos:n}}))},style:{backgroundColor:o},children:Object(a.jsx)("div",{className:"sign",children:"0"!==t?t:""})})}),_=(n(39),function(e){for(var t=e.board,n=e.winPattern,c=e.canMove,o=[],l=1;l<=9;l++)o.push(l);return Object(a.jsx)("div",{className:"board",children:o.map((function(e){return Object(a.jsx)(T,{canMove:c,backgroundColor:(o=n,l=e-1,-1!==o.indexOf(l)?"#ffeaa7":"#E5E5E5"),sign:String(t[e-1]),index:e},Math.random());var o,l}))})});!function(e){e[e.PLACE_BET=0]="PLACE_BET",e[e.WAITING_FOR_OPPONENT_BET=1]="WAITING_FOR_OPPONENT_BET",e[e.OPPONENT_MOVE=2]="OPPONENT_MOVE",e[e.YOUR_MOVE=3]="YOUR_MOVE",e[e.YOU_WON=4]="YOU_WON",e[e.YOU_LOST=5]="YOU_LOST",e[e.EQUAL_BETS=6]="EQUAL_BETS",e[e.NONE=7]="NONE"}(p||(p={})),function(e){e[e.BETTING=0]="BETTING",e[e.NOTICE=1]="NOTICE",e[e.GAMEOVER=2]="GAMEOVER"}(f||(f={})),function(e){e[e.BETTING=0]="BETTING",e[e.BET_WAITING=1]="BET_WAITING",e[e.MOVE_WAITING=2]="MOVE_WAITING",e[e.MOVING=3]="MOVING",e[e.GAMEOVER=4]="GAMEOVER"}(x||(x={}));n(40);var I=function(e){var t=e.name,n=e.balance,c=e.bet,o=e.gameState,l=e.style,s=o===x.BETTING||o===x.GAMEOVER?{display:"block"}:{display:"none"};return Object(a.jsxs)("div",{className:"hud",style:l,children:[Object(a.jsx)("div",{className:"name",children:t.toLocaleUpperCase()}),Object(a.jsxs)("div",{className:"balance",style:s,children:["BALANCE: ",String(n).padStart(3,"0")]}),Object(a.jsx)("div",{className:"bet",children:String(c).padStart(2,"0")})]})},k=(n(41),n(8)),y=function(e){var t=e.boardType,n=e.message,o=e.canClick,l=e.handlePlaceBetValueInput,s=e.placeBet,r=Object(c.useRef)(null),i={width:"212px",display:"block"},d={width:"0px",display:"none"},u={width:"50px",display:"block"},O=o?{backgroundColor:"rgb(255, 211, 105)"}:{backgroundColor:"#8395a7"},m=t===f.GAMEOVER?"GO":"BET";t===f.BETTING?(i={width:"212px",display:"block"},d={width:"0px",display:"none"},u={width:"50px",display:"block"}):t===f.NOTICE?(i={width:"0px",display:"none"},d={width:"262px",display:"flex"},u={width:"0px",display:"none"}):t===f.GAMEOVER&&(i={width:"0px",display:"none"},d={width:"212px",display:"flex"},u={width:"50px",display:"block"});var b="";n===p.WAITING_FOR_OPPONENT_BET?b=k.en.waiting_for_op_bet:n===p.YOUR_MOVE?b=k.en.move:n===p.OPPONENT_MOVE?b=k.en.waiting_for_op_move:n===p.YOU_WON?b=k.en.you_won:n===p.EQUAL_BETS?b=k.en.equal_bet:n===p.PLACE_BET?b=k.en.place_bet:n===p.YOU_LOST&&(b=k.en.you_lost);return Object(a.jsxs)("div",{className:"status-board",children:[Object(a.jsx)("div",{className:"bet-input",style:i,children:Object(a.jsx)("input",{className:"bet-input",ref:r,style:{width:"100%"},placeholder:b,type:"number",id:"betval",name:"betval",min:0,onChange:l,spellCheck:"false"})}),Object(a.jsx)("div",{className:"notice-board",style:d,children:Object(a.jsx)("div",{children:b})}),Object(a.jsx)("div",{className:"bet-btn",style:u,children:Object(a.jsx)("button",{className:"bet-btn",onClick:o?function(){r.current&&(console.log("ICI",r.current.value),r.current.value=void 0),s()}:function(){},style:{backgroundColor:O.backgroundColor,width:"100%"},children:m})})]})},S=(n(42),function(){var e=Object(r.f)(),t=Object(r.g)(),n=Object(c.useState)(0),o=Object(i.a)(n,2),l=o[0],s=o[1],d=Object(c.useState)(f.BETTING),u=Object(i.a)(d,2),O=u[0],m=u[1],b=Object(c.useState)(p.PLACE_BET),j=Object(i.a)(b,2),N=j[0],v=j[1],E=Object(c.useState)(x.BETTING),T=Object(i.a)(E,2),k=T[0],S=T[1],M=Object(c.useState)(100),G=Object(i.a)(M,2),A=G[0],B=G[1],R=Object(c.useState)(!0),w=Object(i.a)(R,2),P=w[0],V=w[1],W=Object(c.useState)([0,0,0,0,0,0,0,0,0]),L=Object(i.a)(W,2),U=L[0],F=L[1],q=Object(c.useState)(0),D=Object(i.a)(q,2),Y=D[0],J=D[1],Q=Object(c.useState)(100),H=Object(i.a)(Q,2),K=H[0],X=H[1],z=Object(c.useState)(""),Z=Object(i.a)(z,2),$=Z[0],ee=Z[1],te=Object(c.useState)([]),ne=Object(i.a)(te,2),ae=ne[0],ce=ne[1];if(Object(c.useEffect)((function(){t.state&&(C.gameChannel=function(e,t){console.log("DSB ~ file: network.ts ~ line 71 ~ connectToGameChannel ~ matchmakerChannelMessage",e);var n=e.match_id;return g.channel("".concat("btt",":").concat(n),{name:t})}(t.state.gameChannelData,t.state.playerName),C.gameChannel.join().receive("ok",(function(e){console.log("Joined game channel",e)})),C.gameChannel.on("start_game_event",(function(e){console.log("On start_game_event",e),e.gamestate.player_1.id===h?ee(e.gamestate.player_2.name):ee(e.gamestate.player_1.name),F(e.gamestate.board)})),C.gameChannel.on("bet_res",(function(e){console.log("bet_res",e),e.p1.id===h?(X(e.p2.balance),J(e.p2.bet)):(X(e.p1.balance),J(e.p1.bet)),"continue"===e.turn.id?(s(0),S(x.BETTING),v(p.EQUAL_BETS),m(f.BETTING)):e.turn.id===h?(S(x.MOVING),v(p.YOUR_MOVE)):(S(x.MOVE_WAITING),v(p.OPPONENT_MOVE))})),C.gameChannel.on("move_res",(function(e){console.log("DSB ~ file: index.tsx ~ line 97 ~ network.gameChannel.on ~ message",e);var t=e.board.map((function(e){return e===h?"X":0!==e?"O":0}));F(t),s(0),S(x.BETTING),m(f.BETTING),v(p.PLACE_BET),e.p1.id})),C.gameChannel.on("game_res",(function(e){console.log("DSB ~ file: index.tsx ~ line 112 ~ network.gameChannel.on ~ message",e),ce(e.pattern);var t=e.board.map((function(e){return e===h?"X":0!==e?"O":0}));F(t),m(f.GAMEOVER),S(x.GAMEOVER),e.winner===h?v(p.YOU_WON):v(p.YOU_LOST)})))}),[]),!t.state)return e.push({pathname:"/"}),Object(a.jsx)(a.Fragment,{});return Object(a.jsxs)("div",{className:"game",children:[Object(a.jsxs)("div",{className:"hud-container",children:[Object(a.jsx)(I,{name:t.state.playerName,bet:l,balance:A-l,gameState:k,style:{backgroundColor:"#FFD369"}}),Object(a.jsx)(I,{name:$,bet:k===x.BET_WAITING||k===x.BETTING?"...":Y,balance:K,gameState:k,style:{backgroundColor:"#FFD369"}})]}),Object(a.jsx)(y,{boardType:O,canClick:P,message:N,handlePlaceBetValueInput:function(e){e.preventDefault();var t=Number(e.target.value);console.log(t),t>A||t<0?V(!1):(V(!0),s(Number(t)))},placeBet:k===x.GAMEOVER?function(){e.push({pathname:"/"})}:function(){var e;k===x.BETTING&&(null===(e=C.gameChannel)||void 0===e||e.push("bet",{betdata:{playerId:h,bet:l}}),B(A-l),S(x.BET_WAITING),m(f.NOTICE),v(p.WAITING_FOR_OPPONENT_BET))}}),Object(a.jsx)(_,{board:U,winPattern:ae,canMove:k===x.MOVING})]})}),M=function(e){return Object(a.jsx)(s.a,{children:Object(a.jsxs)(r.c,{children:[Object(a.jsx)(r.a,{exact:!0,path:"/",component:v}),Object(a.jsx)(r.a,{exact:!0,path:"/lobby",component:E}),Object(a.jsx)(r.a,{exact:!0,path:"/game",component:S})]})})},G=(n(43),function(){return Object(a.jsx)("div",{className:"App",children:Object(a.jsx)(M,{})})}),A=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,45)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,o=t.getLCP,l=t.getTTFB;n(e),a(e),c(e),o(e),l(e)}))};l.a.render(Object(a.jsx)(G,{}),document.getElementById("root")),A()}],[[44,1,2]]]);
//# sourceMappingURL=main.ff4d0e56.chunk.js.map