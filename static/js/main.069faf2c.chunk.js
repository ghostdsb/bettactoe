(this.webpackJsonpbettactoe=this.webpackJsonpbettactoe||[]).push([[0],Array(24).concat([function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),c=n(1),o=n.n(c),l=n(16),s=n.n(l),r=(n(24),n(12)),i=n(2),m=n(3),b=(n(25),function(e){return Object(a.jsx)("div",{className:"input-playername",children:Object(a.jsx)("input",{className:"pname-input-field",type:"text",id:"fname",name:"fname",value:e.value,onChange:e.handleChange})})}),u=(n(26),function(e){return Object(a.jsx)("div",{className:"logo",children:Object(a.jsx)("div",{className:"background",style:{backgroundColor:e.backgroundColor},children:Object(a.jsxs)("div",{className:"foreground",style:{color:e.foregroundColor},children:[Object(a.jsx)("div",{className:"logo-square top left",children:"B"}),Object(a.jsx)("div",{className:"logo-square top c",children:"E"}),Object(a.jsx)("div",{className:"logo-square top right",children:"T"}),Object(a.jsx)("div",{className:"logo-square m left",children:"T"}),Object(a.jsx)("div",{className:"logo-square m c",children:"A"}),Object(a.jsx)("div",{className:"logo-square m right",children:"C"}),Object(a.jsx)("div",{className:"logo-square bottom left",children:"T"}),Object(a.jsx)("div",{className:"logo-square bottom c",children:"O"}),Object(a.jsx)("div",{className:"logo-square bottom right",children:"E"})]})})})}),d=(n(27),function(e){return Object(a.jsx)("div",{className:"custom-button",children:Object(a.jsxs)("button",{className:"btn",onClick:e.onClick,children:[e.text," "]})})}),j=(n(28),function(e){return Object(a.jsxs)("div",{className:"menu-button",children:[Object(a.jsx)("div",{className:"input-component",style:{width:e.animate?e.shouldResetWidth?"0%":"67%":"0%"},children:Object(a.jsx)("input",{className:"rname-input-field",type:"text",id:e.mode,placeholder:"Enter room name",value:e.roomName,onChange:e.handleOnChange})}),Object(a.jsx)("div",{className:"btn-component",style:{width:e.animate?e.shouldResetWidth?"100%":"30%":"100%"},children:Object(a.jsx)(d,{text:e.animate?e.shouldResetWidth?e.text:"GO":e.text,onClick:e.animate&&e.shouldResetWidth?function(){}:e.onClick})})]})}),h=(n(29),function(e){var t=Object(c.useState)(0),n=Object(m.a)(t,2),o=n[0],l=n[1],s=Object(c.useState)(0),r=Object(m.a)(s,2),i=(r[0],r[1],function(t,n){e.handleModeChange(n),l(t)});return Object(a.jsx)("div",{className:"menu-button-container",children:Object(a.jsxs)("div",{style:{width:"262px"},children:[Object(a.jsx)("div",{onClick:function(){return i(1,"create")},children:Object(a.jsx)(j,{onClick:e.onSubmit,mode:"create",text:"CREATE ROOM",animate:!0,shouldResetWidth:1!==o,handleOnChange:e.handleOnChange,roomName:e.roomName})}),Object(a.jsx)("div",{onClick:function(){return i(2,"join")},children:Object(a.jsx)(j,{onClick:e.onSubmit,mode:"join",text:"JOIN ROOM",animate:!0,shouldResetWidth:2!==o,handleOnChange:e.handleOnChange,roomName:e.roomName})}),Object(a.jsx)("div",{onClick:function(){return i(3,"default")},children:Object(a.jsx)(j,{onClick:e.onSubmit,mode:"default",text:"RANDOM",shouldResetWidth:3!==o,handleOnChange:e.handleOnChange,roomName:e.roomName})})]})})}),O=String(Math.floor(1e5*Math.random())),g=n(17);console.log("connecting to btt server ....");var p=new g.Socket("wss://still-plains-97814.herokuapp.com/socket",{params:{playerId:O}});p.connect();n(30);var f=function(){var e=Object(i.f)(),t=Object(c.useState)(""),n=Object(m.a)(t,2),o=n[0],l=n[1],s=Object(c.useState)(""),r=Object(m.a)(s,2),d=r[0],j=r[1],g=Object(c.useState)(2),f=Object(m.a)(g,2),x=f[0],v=f[1],N=Object(c.useState)(String(O)),C=Object(m.a)(N,2),k=C[0],S=C[1];return Object(a.jsxs)("div",{className:"menu",children:[Object(a.jsx)(u,{backgroundColor:"#ffd369",foregroundColor:"#393e46"}),Object(a.jsx)(b,{value:k,handleChange:function(e){console.log(e.target.value),S(e.target.value)}}),Object(a.jsx)(h,{onSubmit:function t(){console.log("DSB ~ file: index.tsx ~ line 95 ~ requestStartGame ~ requestStartGame",t);var n=function(e){console.log("DSB ~ file: network.ts ~ line 27 ~ connectToMatchmakerChannel ~ gameData",e);var t="",n=e.playerCount,a="btt";switch(e.gameMode){case"default":e.roomName?(t="garuda_matchmaker:".concat(e.roomName,":").concat(a,":").concat(n),e.roomName):t="garuda_matchmaker:".concat(a,":").concat(n);break;case"create":t="garuda_matchmaker:".concat(e.roomName,":").concat(a,":createjoin"),e.roomName;break;case"join":t="garuda_matchmaker:".concat(e.roomName,":").concat(a,":createjoin"),e.roomName,n=-1}var c={roomName:t,playerCount:n,matchId:e.roomName,gameMode:e.gameMode};return p.channel(t,{player_count:c.playerCount,room_name:c.roomName,match_id:c.matchId,mode:c.gameMode})}({roomName:d,playerCount:x,gameMode:o||"default"});n.join().receive("ok",(function(e){return console.log("Joined matchmaker",e),"ok"})),n.on("match_maker_event",(function(t){var a;console.log("On match maker event",t),n.leave(),a=t,e.push({pathname:"/game",state:{gameChannelData:a,playerName:k}})}))},handleModeChange:function(e){j(""),v(2),console.log("GAME MODE ",e||"default"),l(e||"default")},roomName:d,handleOnChange:function(e){e.preventDefault(),j(e.target.value)}})]})},x=function(){return Object(a.jsx)("div",{children:"Lobby"})},v={},N=(n(36),function(e){var t=e.value;return Object(a.jsxs)("button",{className:"square",onClick:function(){var t;e.canMove&&(null===(t=v.gameChannel)||void 0===t||t.push("move",{movedata:{pos:e.pos}}))},children:["0"===t&&"",t===O&&"X",t!==O&&"0"!==t&&"O"]})}),C=(n(37),function(e){for(var t=e.canMove,n=e.board,c=[],o=1;o<=9;o++)c.push(o);return Object(a.jsx)("div",{className:"board",children:c.map((function(e){return Object(a.jsx)(N,{value:n[e-1],pos:e,canMove:t},e)}))})}),k=o.a.createContext({playerName:"",opponentName:""}),S=(n(38),function(e){var t=function(t){e.canBet&&e.onClick(t)};return Object(a.jsxs)("div",{className:"bet-controller",style:{opacity:e.canBet?1:0},children:[Object(a.jsx)("div",{className:"up",onClick:function(){return t(1)},children:"U"}),Object(a.jsx)("div",{className:"down",onClick:function(){return t(-1)},children:"D"})]})}),y=(n(39),function(e){return Object(a.jsxs)("div",{className:"player-hud",children:[Object(a.jsx)("div",{className:"name",children:e.name}),e.lid?Object(a.jsx)("div",{className:"waiting-lig",children:"WAITING"}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("div",{className:"balance",children:e.balance}),Object(a.jsx)("div",{className:"bet",children:e.bet})]})]})}),M=(n(40),function(e){var t=e.canBet,n=(e.setBetAmount,e.isOpponentVisible),o=e.opponentData,l=e.playerData,s=e.betController,r=Object(c.useContext)(k);return Object(a.jsxs)("div",{className:"hud",children:[Object(a.jsx)(y,{balance:l.balance,bet:l.bet,name:r.playerName}),Object(a.jsx)(S,{canBet:t,onClick:function(e){return s(e)}}),Object(a.jsx)(y,{balance:o.balance,bet:o.bet,lid:!n,name:r.opponentName})]})}),_=(n(41),function(e){var t="";return e.winner===O?("won",t="CONGRATULATIONS! YOU WON"):("lost",t="BETTER LUCK NEXT TIME!"),Object(a.jsx)("div",{className:"result-comp",children:t})}),w=(n(42),function(){var e=Object(i.f)(),t=Object(i.g)();console.log("DSB ~ file: index.tsx ~ line 32 ~ Game ~ location",t),t.state||e.push({pathname:"/"});var n=Object(c.useState)("OPPONENT"),o=Object(m.a)(n,2),l=o[0],s=o[1],r=Object(c.useState)(!1),b=Object(m.a)(r,2),u=b[0],d=b[1],j=Object(c.useState)(!0),h=Object(m.a)(j,2),g=h[0],f=h[1],x=Object(c.useState)(!1),N=Object(m.a)(x,2),S=N[0],y=N[1],w=Object(c.useState)(!1),D=Object(m.a)(w,2),T=D[0],E=D[1],B=Object(c.useState)(0),A=Object(m.a)(B,2),I=A[0],R=A[1],q=Object(c.useState)({bet:0,balance:100}),W=Object(m.a)(q,2),G=W[0],F=W[1],L=Object(c.useState)({bet:0,balance:100}),P=Object(m.a)(L,2),U=P[0],J=P[1],V=Object(c.useState)(["0","0","0","0","0","0","0","0","0"]),Y=Object(m.a)(V,2),X=Y[0],H=Y[1],K=Object(c.useState)(!1),z=Object(m.a)(K,2),Q=z[0],Z=z[1],$=Object(c.useState)(""),ee=Object(m.a)($,2),te=ee[0],ne=ee[1];Object(c.useEffect)((function(){t.state&&(v.gameChannel=function(e,t){console.log("DSB ~ file: network.ts ~ line 71 ~ connectToGameChannel ~ matchmakerChannelMessage",e);var n=e.match_id;return p.channel("".concat("btt",":").concat(n),{name:t})}(t.state.gameChannelData,t.state.playerName),v.gameChannel.join().receive("ok",(function(e){console.log("Joined game channel",e)})),v.gameChannel.on("start_game_event",(function(e){console.log("On start_game_event",e),e.gamestate.player_1.id===O?s(e.gamestate.player_2.name):s(e.gamestate.player_1.name),d(!0)})),v.gameChannel.on("bet_res",(function(e){console.log("bet_res",e),e.p1.id===O?(F({bet:e.p2.bet,balance:e.p2.balance}),J({bet:e.p1.bet,balance:e.p1.balance})):(F({bet:e.p1.bet,balance:e.p1.balance}),J({bet:e.p2.bet,balance:e.p2.balance})),console.log("DSB ~ file: index.tsx ~ line 60 ~ network.gameChannel.on ~ message.turn",e.turn),console.log("DSB ~ file: index.tsx ~ line 61 ~ network.gameChannel.on ~ PLAYER_ID",O),e.turn.id===O?(y(!0),console.log("YOU CAN MOVE")):(y(!1),console.log("YOU CAN NOT MOVE")),E(!0),f(!1)})),v.gameChannel.on("move_res",(function(e){console.log("move_res",e);var t=e.board.map((function(e){return String(e)}));e.p1.id===O?(F({bet:e.p2.bet,balance:e.p2.balance}),J({bet:0,balance:e.p1.balance})):(F({bet:e.p1.bet,balance:e.p1.balance}),J({bet:0,balance:e.p2.balance})),H(t),f(!0),y(!1),E(!1)})),v.gameChannel.on("game_res",(function(e){console.log("game_res",e),ne(e.winner);var t=e.board.map((function(e){return String(e)}));H(t),f(!1),y(!1),Z(!0)})))}),[]);return Object(a.jsxs)("div",{className:"game",children:[!u&&Object(a.jsx)("div",{className:"waiting",children:"WAITING..."}),u&&Object(a.jsxs)("div",{className:"start-game",children:[Object(a.jsx)(k.Provider,{value:{playerName:t.state.playerName,opponentName:l},children:Object(a.jsx)(M,{canBet:g,setBetAmount:R,isOpponentVisible:T,opponentData:G,playerData:U,betController:function(e){return function(e){var t=Math.max(0,Math.min(U.balance,U.balance-e)),n=Math.max(0,Math.min(U.balance,U.bet+e));J({bet:n,balance:t}),R(n)}(e)}})}),Object(a.jsx)("div",{className:"bet-confirm",style:{opacity:g?1:0},children:Object(a.jsx)("button",{className:"btn-bet-confirm",onClick:function(){var e;g&&(console.log(I),f(!1),y(!1),null===(e=v.gameChannel)||void 0===e||e.push("bet",{betdata:{playerId:O,bet:I}}))},children:"CONFIRM"})}),Object(a.jsx)(C,{canMove:S,board:X}),Q&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(_,{winner:te}),Object(a.jsx)("button",{className:"btn-go-home",onClick:function(){e.push({pathname:"/"})},children:"NEW MATCH"})]})]})]})}),D=function(e){return Object(a.jsx)(r.a,{children:Object(a.jsxs)(i.c,{children:[Object(a.jsx)(i.a,{exact:!0,path:"/",component:f}),Object(a.jsx)(i.a,{exact:!0,path:"/lobby",component:x}),Object(a.jsx)(i.a,{exact:!0,path:"/game",component:w})]})})},T=(n(43),function(){return Object(a.jsx)("div",{className:"App",children:Object(a.jsx)(D,{})})}),E=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,45)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,o=t.getLCP,l=t.getTTFB;n(e),a(e),c(e),o(e),l(e)}))};s.a.render(Object(a.jsx)(T,{}),document.getElementById("root")),E()}]),[[44,1,2]]]);
//# sourceMappingURL=main.069faf2c.chunk.js.map